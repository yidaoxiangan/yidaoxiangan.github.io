<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico">
  <link rel="mask-icon" href="/images/favicon.ico" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yidaoxiangan.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":true,"preload":true},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="不觉茫茫道路长">
<meta property="og:type" content="website">
<meta property="og:title" content="异道相安的博客">
<meta property="og:url" content="https://yidaoxiangan.com/page/2/index.html">
<meta property="og:site_name" content="异道相安的博客">
<meta property="og:description" content="不觉茫茫道路长">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="异道相安">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://yidaoxiangan.com/page/2/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>异道相安的博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">
<!-- hexo injector head_end end --></head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">异道相安的博客</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://yidaoxiangan.com/blog/2021/03/23/%E8%85%BE%E8%AE%AF%E5%90%8E%E5%8F%B0%E5%BC%80%E5%8F%91%E6%9A%91%E6%9C%9F%E5%AE%9E%E4%B9%A0%E9%9D%A2%E7%BB%8F-3%E6%9C%8822%E6%97%A5-hr%E9%9D%A2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="异道相安">
      <meta itemprop="description" content="不觉茫茫道路长">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="异道相安的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/2021/03/23/%E8%85%BE%E8%AE%AF%E5%90%8E%E5%8F%B0%E5%BC%80%E5%8F%91%E6%9A%91%E6%9C%9F%E5%AE%9E%E4%B9%A0%E9%9D%A2%E7%BB%8F-3%E6%9C%8822%E6%97%A5-hr%E9%9D%A2/" class="post-title-link" itemprop="url">2021-03-23-腾讯后台开发暑期实习面经-3月22日-hr面</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-03-23 18:37:24" itemprop="dateCreated datePublished" datetime="2021-03-23T18:37:24+08:00">2021-03-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-07-17 00:19:29" itemprop="dateModified" datetime="2021-07-17T00:19:29+08:00">2021-07-17</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="x00-前">0x00 前</h2>
<p>早上hr打了两个电话过来。在睡觉，全部没接到，以为自己完蛋了。</p>
<p>半个小时后又打过来，约当天下午四点面试。</p>
<h2 id="x01-中">0x01 中</h2>
<p>开始面试</p>
<p>hr要求自我介绍。</p>
<p>hr问哪里人。</p>
<p>hr问学校信息。</p>
<p>hr要求介绍一下项目经经历，谈一下项目的意义。</p>
<p>hr问有打算读研吗？为什么做出这种选择。</p>
<p>hr要求谈一下Java和c++的区别。</p>
<p>hr问什么时候能入职。</p>
<p>hr要求谈更多的项目细节。</p>
<p>hr问是否还参加了其他公司的面试。如果收到offer去哪家。</p>
<p>hr问有没有认识的亲属在腾讯。</p>
<h2 id="x02-后">0x02 后</h2>
<p>加了微信，做了云证。等offer审批中。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://yidaoxiangan.com/blog/2021/03/21/CS302-Operating-System-Note-2021-03-21-CS302-Operating-System-Week5-Note-0x01/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="异道相安">
      <meta itemprop="description" content="不觉茫茫道路长">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="异道相安的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/2021/03/21/CS302-Operating-System-Note-2021-03-21-CS302-Operating-System-Week5-Note-0x01/" class="post-title-link" itemprop="url">CS302 Operating System Week5 Note 0x01</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-03-21 13:45:21" itemprop="dateCreated datePublished" datetime="2021-03-21T13:45:21+08:00">2021-03-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-08-01 17:37:22" itemprop="dateModified" datetime="2021-08-01T17:37:22+08:00">2021-08-01</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="lecture-5-job-schedule">Lecture 5: Job Schedule</h2>
<h2 id="what-is-context-switching">What is context switching?</h2>
<ul>
<li><strong>Scheduling</strong> is the procedure that decides which process to run next.</li>
<li><strong>Context switching</strong> is the actual switching procedure, from one process to another</li>
</ul>
<p><img src="https://i.loli.net/2021/03/21/aWyzdCbMBG68Evs.png" /></p>
<p>Whenever a process goes to blocking / waiting state. E.g., <strong>wait()/sleep()</strong> is called</p>
<ul>
<li>A POSIX signal arrives (e.g., SIGCHLD)</li>
<li>An interrupt arrives (e.g., keystroke(键击，按键))</li>
<li>When the OS scheduler says “time’s up!” (e.g., round-robin)
<ul>
<li>Put it back to "ready"</li>
</ul></li>
<li>When the OS scheduler says “hey, I know you haven’t finished, but the PRESIDENT just arrives, please hold on” (e.g., preemptive(先发制人), round-robin with priority)
<ul>
<li>Put it back to "ready"</li>
</ul></li>
</ul>
<p>Why?</p>
<ul>
<li>For multi-tasking</li>
<li>For fully utilize the CPU</li>
</ul>
<h2 id="cpu-switch-from-process-a-to-process-b">CPU Switch From Process A to Process B</h2>
<p><img src="https://i.loli.net/2021/03/21/n7Npi6VaJRPbLcW.png" /></p>
<ul>
<li>This is also called a “context switch”</li>
<li>Code executed in kernel above is <strong>overhead</strong></li>
</ul>
<h2 id="context-switching">Context switching</h2>
<p>Suppose this process gives up running on the CPU, e.g., calling sleep(). Then:</p>
<ul>
<li>Running --&gt; Interruptible Wait</li>
</ul>
<p>Now, it is time for the scheduler to choose the next process to run.</p>
<p><img src="https://i.loli.net/2021/03/21/XFox2ZaIrgHtTS4.png" /></p>
<p>But, before the scheduler can seize(抓住) the control of the CPU, a very important step has to be taken:</p>
<ul>
<li>Backup all current context of that process to the kernel-space’s PCB:
<ul>
<li>current register values</li>
<li>program counter (which line of code the current program is at)</li>
</ul></li>
</ul>
<p>Say, the scheduler decides to schedule another process in the ready queue. Then, the schedule has to <strong>load the context of that process from the main memory</strong> to the CPU.</p>
<p>We call the entire operation: <strong>context switching</strong>.</p>
<p><img src="https://i.loli.net/2021/03/21/yhSARJjOkWaYt3s.png" /></p>
<h2 id="context-switch-is-expensive">Context switch is expensive</h2>
<ul>
<li>Direct costs in kernel:
<ul>
<li>Save and restore registers, etc.</li>
<li>Switch address space (expensive instructions)</li>
</ul></li>
<li>Indirect costs: cache, buffer cache, &amp; TLB misses</li>
</ul>
<p><img src="https://i.loli.net/2021/03/21/8twrKcX2WEOlj3h.png" /></p>
<h2 id="what-is-process-scheduling">What is process scheduling?</h2>
<ul>
<li>Scheduling is an important topic in the research of the operating system.
<ul>
<li>Related theoretical topics are covered in computer system performance evaluation.</li>
</ul></li>
<li>Scheduling is required because the number of computing resource – the CPU – is <strong>limited</strong>.</li>
</ul>
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">CPU-bound Process</th>
<th style="text-align: left;">I/O-bound process</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Spends most of its running time on the CPU, i.e., <strong>user-time &gt; sys-time</strong></td>
<td style="text-align: left;">Spends most of its running time on I/O, i.e., <strong>sys-time &gt; user-time</strong></td>
</tr>
<tr class="even">
<td style="text-align: left;">Examples - AI course assignments</td>
<td style="text-align: left;">Examples - <strong>/bin/ls</strong>, networking programs</td>
</tr>
</tbody>
</table>
<h2 id="classes-of-process-scheduling">Classes of process scheduling</h2>
<p>Preemptive(先发制人) scheduling (Non-preemptive is out)</p>
<ul>
<li>What is it?
<ul>
<li>When a process is chosen by the scheduler, the process would have the CPU until...
<ul>
<li>the process voluntarily waits I/O, or</li>
<li>the process voluntarily releases the CPU, e.g., <strong>exit()</strong></li>
<li><strong>particular kinds of interrupts (e.g., periodic clock interrupt, a new process steps in) are detected.</strong></li>
</ul></li>
</ul></li>
<li>History
<ul>
<li>In old days, it was called “time-sharing”</li>
<li>Nowadays, all systems are time-sharing</li>
</ul></li>
<li>Pros
<ul>
<li>Good for systems that emphasize <strong>interactiveness</strong>.</li>
<li>Because every task will receive attentions from the CPU</li>
</ul></li>
<li>Cons
<ul>
<li>Bad for systems that emphasize the time in finishing tasks</li>
</ul></li>
</ul>
<h2 id="scheduling-algorithms">Scheduling algorithms</h2>
<ul>
<li>Inputs to the algorithms <img src="https://i.loli.net/2021/03/21/F7slOBkMJwWZqhT.png" /></li>
</ul>
<p>Online vs Offline</p>
<p>An offline scheduling algorithm assumes that you know the sequence of processes that a scheduler will face</p>
<ul>
<li>Theoretical baseline</li>
</ul>
<p>An online scheduling algorithm does not have such an assumption.</p>
<ul>
<li>Practical use</li>
</ul>
<h2 id="algorithm-evaluation">Algorithm evaluation</h2>
<ul>
<li>Number of context switches</li>
<li>Individual &amp; average <strong>turnaround time</strong></li>
<li><p>Individual &amp; average <strong>waiting time</strong></p></li>
<li>Turnaround time
<ul>
<li>The time between the arrival of the task and the termination of the task.</li>
</ul></li>
<li>Waiting time
<ul>
<li>The accumulated time that a task has waited for the CPU.</li>
</ul></li>
</ul>
<h2 id="different-algorithms">Different algorithms</h2>
<ul>
<li>Algorithms
<ul>
<li>Shortest-job-first (SJF)</li>
<li>Round-robin (RR)</li>
<li>Priority scheduling with multiple queues.</li>
<li>… (lab session)</li>
</ul></li>
</ul>
<p>Assumption: context switch is free (in practice, it is expensive)</p>
<h2 id="non-preemptive-sjf">Non-preemptive SJF</h2>
<p><img src="https://i.loli.net/2021/03/21/xfnSV4osMLgOPZa.png" /></p>
<p><img src="https://i.loli.net/2021/03/21/9MR4KfBxo7sDYhz.png" /></p>
<p><img src="https://i.loli.net/2021/03/21/lB9zRy46YnLkTjr.png" /></p>
<p><img src="https://i.loli.net/2021/03/21/wBD1MfZyPul7UW5.png" /></p>
<p><img src="https://i.loli.net/2021/03/21/U2omBrqWPQGSfZv.png" /></p>
<h2 id="sjf">SJF</h2>
<p>Problem</p>
<ul>
<li>What if tasks arrive after P2 <strong>all have CPU requirement &lt; 3</strong>?</li>
<li>Problem persists even for its preemptive version</li>
</ul>
<h2 id="preemptive-sjf">Preemptive SJF</h2>
<p>-Whenever a new process arrives at the system, the scheduler steps in and selects the next task based on <strong>their remaining CPU requirements</strong>.</p>
<p><img src="https://i.loli.net/2021/03/21/3lrxoLj7dniw5Ka.png" /></p>
<p><img src="https://i.loli.net/2021/03/21/1ae9iMt8sRfDIjo.png" /></p>
<p><img src="https://i.loli.net/2021/03/21/4f6Ux2JARFuaPoE.png" /></p>
<p><img src="https://i.loli.net/2021/03/21/Z6as8k7mudDFfiM.png" /></p>
<p><img src="https://i.loli.net/2021/03/21/FsBldWNebSG8w7c.png" /></p>
<p><img src="https://i.loli.net/2021/03/21/lJrNDQ9vazxpgHC.png" /></p>
<h2 id="sjf-preemptive-or-not">SJF: Preemptive or not?</h2>
<p><img src="https://i.loli.net/2021/03/21/VuBWlwMxL7pcT64.png" /></p>
<p>The waiting time and the turnaround time decrease at the expense of the <strong>increased number of context switches</strong>.</p>
<p>Context switch is expensive. (That’s why we shall minimize the # of sys calls as well; on a syscall, the program switch from user-process to kernel-"process".)</p>
<h2 id="round-robin">Round-robin</h2>
<p>Round-Robin (RR) scheduling is preemptive.</p>
<ul>
<li>Every process is given a quantum, or the amount of time allowed to execute.</li>
<li>Whenever the quantum of a process is used up (i.e., 0), the process releases the CPU and <strong>this is the preemption</strong>.</li>
<li>Then, the scheduler steps in and it chooses <strong>the next process which has a non-zero quantum</strong> to run.</li>
<li>If all processes in the system have used up the quantum, they will be re-charged to their initial values.</li>
<li>Processes are therefore running one-by-one as a <strong>circular queue</strong>, for the basic version (i.e., no priority)
<ul>
<li>New processes are added to the tail of the ready queue</li>
<li>New process arrives won’t trigger a new selection decision</li>
</ul></li>
</ul>
<p><img src="https://i.loli.net/2021/03/21/RSJHhuLyW5ZPkDq.png" /></p>
<p><img src="https://i.loli.net/2021/03/21/PySuCFQhDepj9gv.png" /></p>
<p><img src="https://i.loli.net/2021/03/21/142FKhakDXcEjNB.png" /></p>
<p><img src="https://i.loli.net/2021/03/21/A2kMB7UlGSZJvt6.png" /></p>
<p><img src="https://i.loli.net/2021/03/21/th1KoP9UlYX2MLR.png" /></p>
<p><img src="https://i.loli.net/2021/03/21/w5sMacbVl3YnAtU.png" /></p>
<p><img src="https://i.loli.net/2021/03/21/oigfW1UG7lbIrC4.png" /></p>
<p><img src="https://i.loli.net/2021/03/21/PJvspqBMNTcionh.png" /></p>
<p><img src="https://i.loli.net/2021/03/21/ZQxCMDwrWbP24KA.png" /></p>
<p><img src="https://i.loli.net/2021/03/21/79u3asq5nxIUOLX.png" /></p>
<h2 id="rr-vs-sjf">RR VS SJF</h2>
<p><img src="https://i.loli.net/2021/03/21/HdXVBU7jfAucJFh.png" /></p>
<p>So, the RR algorithm gets all the bad! Why do we still need it?</p>
<p>The <strong>responsiveness of the processes</strong> is great under the RR algorithm. E.g., you won’t feel a job is “frozen” because every job gets the CPU from time to time!</p>
<h2 id="priority-scheduling">Priority Scheduling</h2>
<ul>
<li>A task is given a priority (and is usually an integer).</li>
<li>A scheduler selects the next process based on the priority</li>
<li>A higher priority process + RR = priority queue + new process arrival triggers a new selection</li>
</ul>
<p>Static priority</p>
<ul>
<li>Every task is given a fixed priority.</li>
<li>The priority is <strong>fixed</strong> throughout the life of the task.</li>
</ul>
<p>Dynamic priority</p>
<ul>
<li>Every task is given an initial priority</li>
<li>The priority is <strong>changing</strong> throughout the life of the task.</li>
</ul>
<h2 id="if-a-task-is-preempted-in-the-middle">If a task is preempted in the middle</h2>
<p>Note:</p>
<ul>
<li>it has been dequeued</li>
<li>Re-enqueue back to the queue</li>
<li>Quantum preserved / recharge?
<ul>
<li>Depends
<ul>
<li>Preserved: need more book keeping</li>
<li>Recharge: easy (assumed in this course)</li>
</ul></li>
</ul></li>
</ul>
<h2 id="static-priority-scheduling-an-example">Static priority scheduling – an example</h2>
<p><strong>Properties</strong>: process is assigned a fix priority when they are submitted to the system.</p>
<ul>
<li>E.g., Linux kernel 2.6 has 100 priority classes, [0-99].</li>
</ul>
<p><img src="https://i.loli.net/2021/03/21/LErOoKeGtx1Mb5c.png" /></p>
<ul>
<li>The highest priority class will be selected.
<ul>
<li>The tasks are usually <strong>short-lived</strong>, but <strong>important</strong>;
<ul>
<li>To prevent high-priority tasks from running indefinitely</li>
</ul></li>
</ul></li>
</ul>
<p><img src="https://i.loli.net/2021/03/21/opFdfaKGsk9I4Cc.png" /></p>
<p>Lower priority classes will be scheduled only when the upper priority classes has no tasks.</p>
<p><img src="https://i.loli.net/2021/03/21/6WkCr5l4SEYA7pF.png" /></p>
<h2 id="multiple-queue-priority-scheduling">Multiple queue priority scheduling</h2>
<p>Definitions</p>
<ul>
<li>It is still a priority scheduler.</li>
<li>But, at each priority class, different schedulers may be deployed.</li>
<li>The priority can be a mix of static and dynamic.</li>
</ul>
<p><img src="https://i.loli.net/2021/03/21/4ur79GhJRp5DI3C.png" /></p>
<p>Real example, the Linux Scheduler.</p>
<ul>
<li>A multiple queue, (kind of) static priority scheduler</li>
</ul>
<p><img src="https://i.loli.net/2021/03/21/NbPXLg94BctGJeE.png" /></p>
<p><img src="https://i.loli.net/2021/03/21/TSKDFktNyqGfp81.png" /></p>
<p><img src="https://i.loli.net/2021/03/21/UAJGqMZQ4d75Sh8.png" /></p>
<p>Do you notice that real (Linux) scheduler does not rely on task’s CPU (remaining) requirement values?</p>
<p>That is because in practice it’s very difficult to estimate how much CPU time a task needs – CPU is very complicated nowadays:</p>
<ul>
<li>Superscalar</li>
<li>Out-of-order execution (OOE)</li>
<li>Branch prediction</li>
</ul>
<h2 id="recall-four-fundamental-os-concepts">Recall: Four Fundamental OS Concepts</h2>
<ul>
<li>Thread
<ul>
<li>Single unique execution context: fully describes program state</li>
<li>Program Counter, Registers, Execution Flags, Stack</li>
</ul></li>
<li>Address space (with translation)
<ul>
<li>Programs execute in an <strong>address space</strong> that is distinct from the memory space of the physical machine</li>
</ul></li>
<li>Process
<ul>
<li>An instance of an executing program is <strong>a process consisting of an address space and one or more threads of control</strong></li>
</ul></li>
<li>Dual mode operation / Protection
<ul>
<li>Only the "system" has the ability to access certain resources</li>
<li>The OS and the hardware are protected from user programs and user programs are isolated from one another by <strong>controlling the translation</strong> from program virtual addresses to machine physical addresses.</li>
</ul></li>
</ul>
<h2 id="recall-process-what-we-knew-so-far">Recall: Process (What we knew so far)</h2>
<ul>
<li>Process: An instance of an executing program
<ul>
<li>An address space,</li>
<li>One or more threads of control</li>
</ul></li>
<li><p><strong>Heavyweight</strong> process: a process has a single thread of control</p></li>
<li>Two properties of heavyweight process
<ul>
<li>Sequential program execution stream
<ul>
<li>Active part</li>
</ul></li>
<li>Protected resource
<ul>
<li>Passive part</li>
</ul></li>
</ul></li>
</ul>
<h2 id="modern-process-with-threads">Modern Process with Threads</h2>
<ul>
<li>Thread: a <em>sequential execution stream within process</em> (Sometimes called a <strong>"Lightweight process"</strong>)
<ul>
<li>Process still contains a single Address Space</li>
<li>No protection between threads</li>
</ul></li>
<li>Multithreading: <strong>a single program made up of a number of different concurrent activities</strong>
<ul>
<li>Sometimes called multitasking, as in Ada …</li>
</ul></li>
<li>Why separate the concept of a thread from that of a process?
<ul>
<li>Discuss the “thread” part of a process (<strong>concurrency</strong>, <strong>parallelism</strong>)</li>
<li>Separate from the “address space” (protection)</li>
<li><em>Heavyweight Process  Process with one thread</em></li>
</ul></li>
</ul>
<h2 id="single-and-multithreaded-processes">Single and Multithreaded Processes</h2>
<p><img src="https://i.loli.net/2021/03/21/hw4nLtPEGrJSWFH.png" /></p>
<ul>
<li>Threads encapsulate concurrency: <strong>"Active"</strong> component</li>
<li>Address spaces encapsulate protection: <strong>"Passive"</strong> part
<ul>
<li>Keeps buggy program from trashing the system</li>
</ul></li>
</ul>
<h2 id="threads-in-a-process">Threads in a Process</h2>
<ul>
<li>Threads are useful at user-level: parallelism, hide I/O latency, interactivity</li>
<li>Option A (early Java): user-level library, one multi-threaded process
<ul>
<li>Library does thread context switch</li>
<li>Kernel time slices between processes, e.g., on system call I/O</li>
</ul></li>
<li>Option B (SunOS, Linux/Unix variants): many single-threaded processes</li>
<li>Option C (Windows): scheduler activations
<ul>
<li>Kernel allocates processes to user-level library</li>
<li>Thread library implements context switch</li>
<li>System call I/O that blocks triggers up-call(向上调用)</li>
</ul></li>
<li>Option D (Linux, MacOS, Windows): use kernel thread
<ul>
<li>System calls for thread fork, join, exit (and lock, unlock,…)</li>
<li>Kernel does context switching</li>
<li>Simple, but a lot of transitions between user and kernel mode</li>
</ul></li>
</ul>
<h2 id="thread-state">Thread State</h2>
<ul>
<li>State shared by all threads in process/address space
<ul>
<li>Content of memory (global variables, heap)</li>
<li>I/O state (file descriptors, network connections, etc)</li>
</ul></li>
<li>State "private" to each thread
<ul>
<li>Kept in <strong>TCB = Thread Control Block</strong></li>
<li>CPU registers (including, program counter)</li>
<li>Execution stack – what is this?</li>
</ul></li>
<li>Execution Stack
<ul>
<li>Parameters, temporary variable</li>
<li>Return PCs are kept while called procedures are executing</li>
</ul></li>
</ul>
<h2 id="shared-vs.-per-thread-state">Shared vs. Per-Thread State</h2>
<p><img src="https://i.loli.net/2021/03/21/CVwTcXiEUdlanz3.png" /></p>
<h2 id="execution-stack-example">Execution Stack Example</h2>
<p><img src="https://i.loli.net/2021/03/21/qCFatinEZPGmAgz.png" /></p>
<h2 id="thread-lifecycle">Thread Lifecycle</h2>
<p><img src="https://i.loli.net/2021/03/21/GUYc5SwleOmhyn3.png" /></p>
<h2 id="multithreaded-processes">Multithreaded Processes</h2>
<ul>
<li>Multithreaded Processes</li>
<li>Thread Control Blocks (TCBs):</li>
</ul>
<p><img src="https://i.loli.net/2021/03/21/L1oCDs4WH9A5vem.png" /></p>
<ul>
<li>Switching threads within a block is a simple thread switch</li>
<li>Switching threads across blocks requires changes to memory and I/O address tables</li>
</ul>
<h2 id="putting-it-together-process">Putting it Together: Process</h2>
<p><img src="https://i.loli.net/2021/03/21/flWQw84Xq3InPKa.png" /></p>
<h2 id="putting-it-together-processes">Putting it Together: Processes</h2>
<p><img src="https://i.loli.net/2021/03/21/FVRAfGEohTvJwn5.png" /></p>
<ul>
<li>Switch overhead: high
<ul>
<li>CPU state: low</li>
<li>Memory/IO state: high</li>
</ul></li>
<li>Process creation: high</li>
<li>Protection
<ul>
<li>CPU: yes</li>
<li>Memory/IO: yes</li>
</ul></li>
<li>Sharing overhead: high (involves at least a context switch)</li>
</ul>
<h2 id="putting-it-together-threads">Putting it Together: Threads</h2>
<p><img src="https://i.loli.net/2021/03/21/lS5TiQB3hy2wIac.png" /></p>
<ul>
<li>Switch overhead: low (as only CPU state)</li>
<li>Thread creation: low</li>
<li>Protection
<ul>
<li>CPU: yes</li>
<li>Memory/IO: no</li>
</ul></li>
<li>Sharing overhead: low(thread switch overhead low)</li>
</ul>
<h2 id="putting-it-together-multi-cores">Putting it Together: Multi-Cores</h2>
<p><img src="https://i.loli.net/2021/03/21/E7OACRQ82WxmDv4.png" /></p>
<ul>
<li>Switch overhead: low (only CPU state)</li>
<li>Thread creation: low</li>
<li>Protection
<ul>
<li>CPU: yes</li>
<li>Memory/IO: No</li>
</ul></li>
<li>Sharing overhead:
<ul>
<li>low (thread switch overhead low, may not need to switch CPU at all!)</li>
</ul></li>
</ul>
<h2 id="simultaneous-multithreadinghyperthreading">Simultaneous MultiThreading/Hyperthreading</h2>
<ul>
<li>Hardware technique
<ul>
<li>Superscalar processors can execute multiple instructions that are independent</li>
<li>Hyperthreading duplicates register state to make a second “thread,” allowing more instructions to run</li>
</ul></li>
<li>Can schedule each thread as if were separate CPU
<ul>
<li>But, sub-linear speedup!</li>
</ul></li>
<li>Original called "Simultaneous Multithreading"
<ul>
<li><a target="_blank" rel="noopener" href="http://www.cs.washington.edu/research/smt/index.html">http://www.cs.washington.edu/research/smt/index.html</a></li>
<li>Intel, SPARC, Power (IBM)</li>
<li>A virtual core on AWS’ EC2 is basically a hyperthread</li>
</ul></li>
</ul>
<h2 id="putting-it-together-hyper-threading">Putting it Together: Hyper-Threading</h2>
<p><img src="https://i.loli.net/2021/03/21/RdVeTqyZ8E6J79G.png" /></p>
<ul>
<li>Switch overhead between
<ul>
<li>hardware-threads: very-low (done in hardware)</li>
</ul></li>
<li>Contention for ALUs/FPUs may hurt performance</li>
</ul>
<h2 id="multiprocessing-vs-multiprogramming">Multiprocessing vs Multiprogramming</h2>
<ul>
<li>Remember Definitions:
<ul>
<li>Multiprocessing <span class="math inline">\(\equiv\)</span> Multiple CPUs</li>
<li>Multiprogramming <span class="math inline">\(\equiv\)</span> Multiple Jobs or Processes</li>
<li>Multithreading <span class="math inline">\(\equiv\)</span> Multiple threads per Process</li>
</ul></li>
<li>What does it mean to run two threads “concurrently”?
<ul>
<li>Scheduler is free to run threads in any order and interleaving: FIFO, Random, …</li>
<li>Dispatcher(调度器) can choose to run each thread to completion or time-slice in big chunks or small chunks</li>
</ul></li>
</ul>
<p><img src="https://i.loli.net/2021/03/21/9EvxMH6kUKApa71.png" /></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://yidaoxiangan.com/blog/2021/03/20/CS302-Operating-System-Note-2021-03-20-CS302-Operating-System-Week5-Note-0x00/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="异道相安">
      <meta itemprop="description" content="不觉茫茫道路长">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="异道相安的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/2021/03/20/CS302-Operating-System-Note-2021-03-20-CS302-Operating-System-Week5-Note-0x00/" class="post-title-link" itemprop="url">CS302 Operating System Week5 Note 0x00</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-03-20 07:28:01" itemprop="dateCreated datePublished" datetime="2021-03-20T07:28:01+08:00">2021-03-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-08-01 17:37:09" itemprop="dateModified" datetime="2021-08-01T17:37:09+08:00">2021-08-01</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="user-space-invoke-system-calls">User space invoke system calls</h2>
<p>E.g.</p>
<ul>
<li>fork()</li>
<li>exec*()</li>
<li>wait()</li>
</ul>
<p>Kernel space keep PCB.</p>
<h2 id="when-invoking-a-system-callmemory-view">When invoking a system call(memory view)</h2>
<ul>
<li>When running a program code of a user process.</li>
<li>As the code is in use-space memory, so the program counter is pointing to that region.</li>
<li>When the process is calling the system call "getpid()".</li>
<li>Then, the CPU switches <strong>from the user-space to the kernel-space</strong>, and reads the PID of the process from the kernel.</li>
<li>When the CPU has finished executing the "getpid()" system call
<ul>
<li>It <strong>switches back to the user-space memory</strong>, and continues running that program code.</li>
</ul></li>
</ul>
<h2 id="when-invoking-a-system-call-cpu-view">When invoking a system call (CPU view)</h2>
<ul>
<li>user process
<ul>
<li>user process executing</li>
<li>call system call</li>
</ul></li>
<li>kernel
<ul>
<li>trap mode bit = 0</li>
<li>execute system call</li>
<li>return mode bit = 1</li>
</ul></li>
<li>return from system call</li>
</ul>
<h2 id="process-real-time-costwall-clock-time">Process real time cost(wall-clock time)</h2>
<h2 id="user-time-vs-system-time">User time VS System time</h2>
<ul>
<li>With the tool <strong>"time"</strong>
<ul>
<li>Real-time</li>
<li>user time</li>
<li>sys time</li>
</ul></li>
</ul>
<p>Accessing hardware costs the process more time.</p>
<ul>
<li><p>The user time and the sys time together <strong>define the performance of an application</strong></p></li>
<li>Function calls cause overhead
<ul>
<li>Stack pushing</li>
</ul></li>
<li>Sys calls may cause even more
<ul>
<li>Sys call is from another "process" (the kernel)</li>
<li>Switching to another "process" -&gt; context switch(will see later)</li>
</ul></li>
</ul>
<h2 id="fork-inside-the-kernel">fork() inside the kernel</h2>
<ul>
<li>Inside kernel, processes are arranged as a doubly linked list, called the <strong>task list</strong>.</li>
</ul>
<h2 id="fork-in-action---array-of-opened-files">fork() in action - array of opened files?</h2>
<p>Array of opened files contains:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Array Index</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">0</td>
<td style="text-align: left;">Standard Input Stream; FILE *stdin;</td>
</tr>
<tr class="even">
<td style="text-align: left;">1</td>
<td style="text-align: left;">Standard Output stream; FILE *stdout;</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2</td>
<td style="text-align: left;">Standard Error Stream; FILE *stderr;</td>
</tr>
<tr class="even">
<td style="text-align: left;">3 or beyond</td>
<td style="text-align: left;">Storing the files you opened. e.g., fopen(), open(), etc.</td>
</tr>
</tbody>
</table>
<ul>
<li><p>That's why a parent process <strong>shares the same terminal output stream</strong> as the child process.</p></li>
<li><p>Stream is just a <strong>logical</strong> object for you to read as a <strong>sequence of bytes</strong></p></li>
</ul>
<h2 id="working-of-system-calls-exec">Working of system calls exec*()</h2>
<ul>
<li>exec*()l is called</li>
<li>The process returns to user-space <strong>but is executing another program</strong></li>
</ul>
<h2 id="exec-in-action">exec*() in action</h2>
<ul>
<li>Process 1234 invoked exec*()</li>
<li>get in kernel space
<ul>
<li>kernel space will operate the memory of current process:
<ul>
<li>local variable is cleared</li>
<li>Dynamically-allocated memory is cleared</li>
<li>Global variable is reset based on the new code</li>
<li>Code and constants are changed to the new program code.</li>
</ul></li>
<li>The kernel will also
<ul>
<li>reset the register values(e.g., program counter)</li>
</ul></li>
</ul></li>
</ul>
<h2 id="working-of-system-calls-wait-and-exit">working of system calls wait() and exit()</h2>
<h2 id="exit-kernel-view">exit() kernel-view</h2>
<ul>
<li>The kernel frees all the allocated memory(I guess in kernel space).</li>
<li>The list of opened files are all closed.(So it's okay to skip fclosed()); though not recommended</li>
<li>Then, the kernel <strong>frees everything on the user-space memory</strong> about the concerned process, including program code and allocated memory.</li>
<li>Process ID stills in the kernel's process table
<ul>
<li>Why?
<ul>
<li>[Wiki] This entry is still needed to allow the process that started the (now zombie) process to read its exit status.</li>
</ul></li>
<li>The status of the child is now called <strong>zombie ("terminated")</strong>.</li>
</ul></li>
<li>Last but no least, the <strong>kernel</strong> notifies the <strong>parent</strong> of the child process about the termination of its child.</li>
<li>The kernel sends a SIGCHLD <strong>signal</strong> to the parent.</li>
</ul>
<h2 id="summary----what-the-kernel-does-for-exit">Summary -- what the kernel does for exit()</h2>
<ul>
<li>Step(1) Clean up most of the allocated kernel-space memory (e.g., process's running time info)</li>
<li>step(2) Clean up the exit process's user-space memory</li>
<li>Step(3) Notify the parent with SIGCHLD.</li>
</ul>
<h2 id="wait-kernel-views-registering-signal-handling-routine">wait() kernel view's registering signal handling routine</h2>
<ul>
<li>By default, every process does not respond to the SIGCHLD
<ul>
<li>i.g., the parent ignores his child unless he is waiting for the child</li>
</ul></li>
<li>But if a process has called <strong>wait()</strong>
<ul>
<li>The kernel will register a <strong>signal handling routine</strong> for that process.(in kernel space)</li>
</ul></li>
<li>When <strong>SIGCHLD</strong> comes, the corresponding <strong>signal handling routine is invoked</strong>!</li>
<li><p>Note: the parent is still inside the <strong>wait()</strong> system call</p></li>
<li>Default Handler of SIGCHLD registered by the kernel
<ul>
<li>Accept and remove the SIGCHLD signal</li>
<li>Destroy the child process in the <strong>kernel-space(remove it from process table, task-list, etc.)</strong></li>
</ul></li>
<li>The kernel
<ul>
<li>Deregisters the signal handling routine for the parent</li>
<li>returns the PID of the terminated child as the return value of <strong>wait()</strong></li>
</ul></li>
<li><p>The parent is ignoring <strong>SIGCHLD</strong> again</p></li>
</ul>
<h2 id="overall---normal-case">Overall - normal case</h2>
<p><img src="https://i.loli.net/2021/03/20/kYmM4vbSTXDjguI.png" /> <img src="https://i.loli.net/2021/03/20/JIPhXcKWqeum67s.png" /></p>
<h2 id="parents-wait-after-childs-exit">Parent's wait() after child's exit()</h2>
<p><img src="https://i.loli.net/2021/03/20/aAFH3YhZqIXnUmW.png" /> <img src="https://i.loli.net/2021/03/20/He8WFQhvETbtIsm.png" /></p>
<h2 id="wait-and-exit-short-summary">wait() and exit() short summary</h2>
<ul>
<li>exit() system call turns a process into a zombie when
<ul>
<li>The process call <strong>exit()</strong></li>
<li>The process returns from <strong>main()</strong></li>
<li>The process terminates abnormally
<ul>
<li>The kernel knows that the process is terminated abnormally. Hence, the kernel invokes <strong>exit()</strong> for it.</li>
</ul></li>
</ul></li>
<li><strong>wait()</strong> and <strong>waitpid()</strong> are to reap zombie child processes
<ul>
<li>It is a must that you should never leave any zombies in the system</li>
<li><strong>wait()</strong> and <strong>waitpid()</strong> pause the caller until
<ul>
<li>A child terminates/stops, OR</li>
<li>The caller receives a signal (i.e., the signal interrupted the <strong>wait()</strong>)</li>
</ul></li>
</ul></li>
<li>Linux will label zombie process as "<strong>&lt;defunct&gt;</strong>"</li>
<li>To look for them</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ps aux | grep defunct</span><br></pre></td></tr></table></figure>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> pid;</span><br><span class="line">    <span class="keyword">if</span>( (pid = fork()) !=<span class="number">0</span> ) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Look at the status of the child process %d\n&quot;</span>, pid);  </span><br><span class="line">        <span class="keyword">while</span>( <span class="built_in">getchar</span>() != <span class="string">&#x27;\n&#x27;</span> ); <span class="comment">// &quot;enter&quot; here. Child process is defunct/zombie</span></span><br><span class="line">        <span class="built_in">wait</span>(<span class="literal">NULL</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Look again!\n&quot;</span>); <span class="comment">// &quot;enter&quot; here. Child process vanish.</span></span><br><span class="line">    <span class="keyword">while</span>( <span class="built_in">getchar</span>() != <span class="string">&#x27;\n&#x27;</span> );</span><br><span class="line">&#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>This program requires you to type “enter” twice before the process terminates.</p>
<p>You are expected to see the status of the child process changes (ps aux [PID]) between the 1st and the 2nd “enter"</p>
<h2 id="calling-wait-is-important">Calling wait() is important</h2>
<ul>
<li>It is not only about process execution suspension…</li>
<li>It is about <strong>system resource management</strong>.
<ul>
<li>A zombie takes up a PID;</li>
<li>The total number of PIDs are limited;</li>
<li>Read the limit: <code>cat /proc/sys/kernel/pid_max</code></li>
<li>It is 32768.</li>
</ul></li>
<li>What will happen if we don’t clean up the zombies?</li>
</ul>
<h2 id="the-fork-bomb">The fork bomb</h2>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</span><br><span class="line"><span class="keyword">while</span>( fork() );</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Deliberately missing wait()</li>
<li>Do not try this on department’s machines…</li>
</ul>
<h2 id="the-first-process">The first process</h2>
<ul>
<li>We now focus on the process-related events
<ul>
<li>The kernel, while it is booting up, creates the first process – <strong>init</strong>.</li>
</ul></li>
<li>The <strong>init</strong> process:
<ul>
<li>has <strong>PID = 1</strong>, and</li>
<li>is running the program code <code>/sbin/init</code>.</li>
</ul></li>
<li>Its first task is to create more processes…
<ul>
<li>Using <strong>fork()</strong> and **exec*()**.</li>
</ul></li>
</ul>
<h2 id="process-blossoming">PRocess blossoming</h2>
<ul>
<li>You can view the tree with the command:
<ul>
<li><code>pstree</code> or</li>
<li><code>pstree -A</code> for the ASCII-character-only display. <img src="https://i.loli.net/2021/03/20/MepN8ycu5l9R2xK.png" /></li>
</ul></li>
</ul>
<h2 id="process-blossoming...-with-orphans">Process blossoming... with orphans?</h2>
<ul>
<li>However, termination can happen, at any time and in any place…
<ul>
<li>This is no good because an orphan turns the hierarchy from a <strong>tree</strong> into a <strong>forest</strong>!</li>
<li>Plus, no one would know the termination of the orphan. <img src="https://i.loli.net/2021/03/20/8C2vnly7B4OI9S6.png" /></li>
</ul></li>
</ul>
<h2 id="process-blossomingwith-re-parent">Process blossoming…with re-parent</h2>
<ul>
<li>In Linux
<ul>
<li>The <strong>init</strong> process will become the step-mother of all orphans</li>
<li>It's called <strong>re-parenting</strong></li>
</ul></li>
<li>In Windows
<ul>
<li>It maintains a forest-like process hierarchy...... <img src="https://i.loli.net/2021/03/20/gtrRVB4wQEjcJ9x.png" /></li>
</ul></li>
</ul>
<h2 id="re-parenting-example">Re-parenting example</h2>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i;</span><br><span class="line">    <span class="keyword">if</span>(fork() == <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">       <span class="built_in">printf</span>(<span class="string">&quot;(%d) parent&#x27;s PID = %d\n&quot;</span>,</span><br><span class="line">       <span class="built_in">getpid</span>(), <span class="built_in">getppid</span>() );</span><br><span class="line">       <span class="built_in">sleep</span>(<span class="number">1</span>);</span><br><span class="line">       &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">       <span class="built_in">sleep</span>(<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;(%d) bye.\n&quot;</span>, <span class="built_in">getpid</span>());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ ./reparent</span><br><span class="line">(1235) parent<span class="string">&#x27;s PID = 1234</span></span><br><span class="line"><span class="string">(1235) parent&#x27;</span>s PID = 1234</span><br><span class="line">(1234) <span class="built_in">bye</span>.</span><br><span class="line">$ (1235) parent’s PID = 1</span><br><span class="line">(1235) parent’s PID = 1</span><br><span class="line">(1235) parent’s PID = 1</span><br><span class="line">(1235) <span class="built_in">bye</span>.</span><br></pre></td></tr></table></figure>
<h2 id="what-had-happened-during-re-parenting">What had happened during re-parenting?</h2>
<p><img src="https://i.loli.net/2021/03/20/HaXNdsfRWzAu3xM.png" /> <img src="https://i.loli.net/2021/03/20/rKSyb39t6cUqdOF.png" /></p>
<h2 id="background-jobs">Background jobs</h2>
<ul>
<li>The re-parenting operation enables something called <strong>background jobs</strong> in Linux
<ul>
<li>It allows a process runs without a parent terminal/shell</li>
</ul></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ ./infinite_loop &amp;</span><br><span class="line">$ <span class="built_in">exit</span></span><br><span class="line">[ The shell is gone ]</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ ps –C infinite_loop</span><br><span class="line"></span><br><span class="line">PID TTY</span><br><span class="line">1234 ... ./infinite_loop</span><br><span class="line"></span><br><span class="line">$ _ </span><br></pre></td></tr></table></figure>
<h2 id="process-lifecycle">Process lifecycle</h2>
<p><img src="https://i.loli.net/2021/03/20/Rvua5wCxG8TN4h9.png" /></p>
<h2 id="process-lifecycle---ready">Process lifecycle - Ready</h2>
<p><img src="https://i.loli.net/2021/03/20/uSARTdtOzioGFg4.png" /></p>
<h2 id="process-lifecycle---running">Process lifecycle - Running</h2>
<p><img src="https://i.loli.net/2021/03/20/OqcYJzE9DfIQFmb.png" /></p>
<h2 id="process-lifecycle---blocking">Process lifecycle - Blocking</h2>
<p><img src="https://i.loli.net/2021/03/20/eRZ1UKxXsPwj37u.png" /></p>
<h2 id="process-lifecycle---interruptible-wait">Process lifecycle - Interruptible wait</h2>
<ul>
<li>Example. <strong>Reading a file.</strong>
<ul>
<li>Sometimes, the process has to wait for the response from the device and, therefore, it is blocked
<ul>
<li>this blocking state is <strong>interruptible</strong></li>
<li>E.g., “Ctrl + C” can get the process out of the waiting state (but goes to termination state instead).</li>
</ul></li>
</ul></li>
</ul>
<h2 id="process-lifecycle---un-interruptible-wait">Process lifecycle - Un-Interruptible wait</h2>
<p>Sometimes, a process needs to wait for a resource until it really gets what it wants</p>
<ul>
<li>Doesn’t want to be “Ctrl-C” interruptible</li>
<li><strong>Un-interruptible status</strong>
<ul>
<li>No way to signal it to wake up unless it returns itself</li>
<li>Check online! The only solution is … Who set this?</li>
<li>E.g., <a target="_blank" rel="noopener" href="http://man7.org/linux/man-pages/man2/delete_module.2.html">syscall call</a></li>
</ul></li>
<li>Why set this?
<ul>
<li>Easier programming for lazy programmer (e.g., a driver program for a DVD drive)</li>
<li>The programmer “thinks” the wait is very short and robust .
<ul>
<li>This is one the top reasons that hang your machine / process today!</li>
</ul></li>
<li>…</li>
</ul></li>
<li><a target="_blank" rel="noopener" href="http://unix.stackexchange.com/questions/96797/what-does-the-interruptible-sleep-state-indicate">http://unix.stackexchange.com/questions/96797/what-does-the-interruptible-sleep-state-indicate</a></li>
<li><a target="_blank" rel="noopener" href="http://stackoverflow.com/questions/767551/how-to-stop-uninterruptible-process-on-linux">http://stackoverflow.com/questions/767551/how-to-stop-uninterruptible-process-on-linux</a></li>
</ul>
<h2 id="process-lifecycle---return-back-to-ready">Process lifecycle - return back to ready</h2>
<p><img src="https://i.loli.net/2021/03/20/lxZ2SmhivuwteIk.png" /></p>
<h2 id="process-lifecycle---going-to-die">Process lifecycle - going to die</h2>
<p><img src="https://i.loli.net/2021/03/20/VBXdG42kHjFn9MC.png" /></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://yidaoxiangan.com/blog/2021/03/18/2021%E8%85%BE%E8%AE%AF%E5%90%8E%E5%8F%B0%E5%BC%80%E5%8F%91%E6%9A%91%E6%9C%9F%E5%AE%9E%E4%B9%A0%E9%9D%A2%E7%BB%8F-3%E6%9C%8818%E6%97%A5-%E4%BA%8C%E9%9D%A2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="异道相安">
      <meta itemprop="description" content="不觉茫茫道路长">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="异道相安的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/2021/03/18/2021%E8%85%BE%E8%AE%AF%E5%90%8E%E5%8F%B0%E5%BC%80%E5%8F%91%E6%9A%91%E6%9C%9F%E5%AE%9E%E4%B9%A0%E9%9D%A2%E7%BB%8F-3%E6%9C%8818%E6%97%A5-%E4%BA%8C%E9%9D%A2/" class="post-title-link" itemprop="url">2021-03-18-2021腾讯后台开发暑期实习面经-3月18日-二面</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-03-18 11:33:26" itemprop="dateCreated datePublished" datetime="2021-03-18T11:33:26+08:00">2021-03-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-07-17 00:19:29" itemprop="dateModified" datetime="2021-07-17T00:19:29+08:00">2021-07-17</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="x00-准备">0x00 准备</h2>
<p>今天一整天没课，为面试准备了一整天。前前后后做了几千字的笔记。</p>
<h2 id="x01-面试">0x01 面试</h2>
<p>晚上7点开始。先自我介绍。</p>
<p>面试官问：选出一个能介绍你自己的项目。</p>
<p>我选了游戏项目。</p>
<p>面试官：我们部门主要是做基础架构的，你要是想做游戏我可以帮你推给其他部门。</p>
<p>我：立刻改口。</p>
<p>面试官问其他项目，提到C/C++。</p>
<p>面试官要求设计一个接口。基于C/C++，输入两个int型的变量，输出它们的乘积。</p>
<p>面试官问网络相关项目。</p>
<p>面试官问：tcp和udp能同时用一个端口吗。</p>
<p>面试官问：什么时候能来上班。</p>
<p>面试官问：老家什么地方的。</p>
<p>面试官问：打算考研吗？</p>
<p>面试官问：将来有什么打算？</p>
<h2 id="x02-反问环节">0x02 反问环节</h2>
<p>我：主要业务是什么？</p>
<p>我：技术水平如何？</p>
<p>我：希望什么时候能入职？</p>
<p>我：听说腾讯工作比其他大厂轻松，真的吗？</p>
<p>我：如果过了，还有几轮面试？</p>
<p>我：有什么需要学习的地方？</p>
<p>我：面试中有哪些不足？</p>
<h2 id="x03-后记">0x03 后记</h2>
<p>满打满算只问了二十分钟，没怎么问技术问题。面试总时长三十分钟。</p>
<p>10分钟出结果，官网显示复试过了，到hr面。大概teg真缺人。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://yidaoxiangan.com/blog/2021/03/17/Hexo%E4%BD%BF%E7%94%A8Pandoc%E6%B8%B2%E6%9F%93%E5%B8%A6%E6%9D%A5%E7%9A%84%E5%88%97%E8%A1%A8%E7%BC%A9%E8%BF%9B%E9%97%AE%E9%A2%98%E5%8F%8A%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="异道相安">
      <meta itemprop="description" content="不觉茫茫道路长">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="异道相安的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/2021/03/17/Hexo%E4%BD%BF%E7%94%A8Pandoc%E6%B8%B2%E6%9F%93%E5%B8%A6%E6%9D%A5%E7%9A%84%E5%88%97%E8%A1%A8%E7%BC%A9%E8%BF%9B%E9%97%AE%E9%A2%98%E5%8F%8A%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/" class="post-title-link" itemprop="url">Hexo使用Pandoc渲染带来的列表缩进问题及解决方案</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-03-17 19:12:04" itemprop="dateCreated datePublished" datetime="2021-03-17T19:12:04+08:00">2021-03-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-07-17 00:19:29" itemprop="dateModified" datetime="2021-07-17T00:19:29+08:00">2021-07-17</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="x00-起因">0x00 起因</h2>
<p>为了让数学公式在博客上被成功的渲染，我找了半天的教程。最后按照这篇next主题这篇<a target="_blank" rel="noopener" href="https://theme-next.js.org/docs/third-party-services/math-equations">官方指导</a>来解决了公式渲染问题。</p>
<p>具体思路如下。</p>
<ol type="1">
<li>在 next/config.yml 文件中修改如下。</li>
</ol>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Math Formulas Render Support</span></span><br><span class="line"><span class="attr">math:</span></span><br><span class="line">  <span class="comment"># Default (false) will load mathjax / katex script on demand.</span></span><br><span class="line">  <span class="comment"># That is it only render those page which has `mathjax: true` in front-matter.</span></span><br><span class="line">  <span class="comment"># If you set it to true, it will load mathjax / katex srcipt EVERY PAGE.</span></span><br><span class="line">  <span class="attr">every_page:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">mathjax:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># Available values: none | ams | all</span></span><br><span class="line">    <span class="attr">tags:</span> <span class="string">none</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">katex:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">    <span class="comment"># See: https://github.com/KaTeX/KaTeX/tree/master/contrib/copy-tex</span></span><br><span class="line">    <span class="attr">copy_tex:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>
<ol start="2" type="1">
<li>删除原有的<code>hexo-renderer-marked</code>包，安装<code>hexo-renderer-pandoc</code>包。</li>
</ol>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ npm un hexo-renderer-marked</span><br><span class="line">- no output</span><br><span class="line">$ npm i hexo-renderer-pandoc</span><br><span class="line">- no output</span><br></pre></td></tr></table></figure>
<ol start="3" type="1">
<li>安装 <a target="_blank" rel="noopener" href="https://github.com/jgm/pandoc">pandoc</a>。</li>
</ol>
<h2 id="x01-问题">0x01 问题</h2>
<p>数学公式渲染得非常完美，但是markdown文档的无序列表出了问题。</p>
<p>起因在于我使用vscode编辑markdown文档，markdown使用两个空格来表示无序列表和子列表的缩进。</p>
<p>markdown格式并没有非常严格统一的标准，各家都有自己小小的不同。pandoc则默认使用4个空格来做列表和子列表的缩进。</p>
<h2 id="x02-解决">0x02 解决</h2>
<p>在网上查了一下，五年前就有人在<a target="_blank" rel="noopener" href="https://github.com/jgm/pandoc">pandoc项目</a>下提出了相关的<a target="_blank" rel="noopener" href="https://github.com/jgm/pandoc/issues/2210">issue</a>。程序员们为应该使用4个空格还是2个空格进行缩进吵得不亦乐乎。</p>
<p>issue串中有人提出了<a target="_blank" rel="noopener" href="https://github.com/jgm/pandoc/issues/2210#issuecomment-215547943">解决方案</a>。</p>
<blockquote>
<p>Sorry about the necro post.</p>
<p>Using --tab-stop 2 in the command line will allow you to use 2 spaces for nesting lists. Not sure of this is a deprecated or undocumented feature, works in 1.17.0.2-win.</p>
</blockquote>
<p>也就是说pandoc提供了 <code>--tab-stop 2</code> 这一标签来确定这类缩进的空格数。我们可以轻易的猜想到hexo使用了 <code>hexo-renderer-pandoc</code>这一npm包来调用pandoc以渲染markdown。</p>
<p>找到调用的js源代码并修改。</p>
<p>目录：<strong>myblog/node_modules/hexo-renderer-pandoc/index.js</strong></p>
<p>源代码为：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> args = [ <span class="string">&#x27;-f&#x27;</span>, <span class="string">&#x27;markdown-smart&#x27;</span>+extensions, <span class="string">&#x27;-t&#x27;</span>, <span class="string">&#x27;html-smart&#x27;</span>, math]</span><br></pre></td></tr></table></figure>
<p>修改为：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> args = [ <span class="string">&#x27;-f&#x27;</span>, <span class="string">&#x27;markdown&#x27;</span>+extensions, <span class="string">&#x27;-t&#x27;</span>, <span class="string">&#x27;html&#x27;</span>, math, <span class="string">&#x27;--tab-stop&#x27;</span>, <span class="string">&#x27;2&#x27;</span>]</span><br></pre></td></tr></table></figure>
<p>其中，去掉两个smart是解决<a target="_blank" rel="noopener" href="https://github.com/wzpan/hexo-renderer-pandoc/issues/36">另一个bug</a>。不在此赘述。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://yidaoxiangan.com/blog/2021/03/17/CS304-Software-Engineering-Note-2021-03-17-CS304-Software-Engineering-Week5-Note/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="异道相安">
      <meta itemprop="description" content="不觉茫茫道路长">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="异道相安的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/2021/03/17/CS304-Software-Engineering-Note-2021-03-17-CS304-Software-Engineering-Week5-Note/" class="post-title-link" itemprop="url">CS304 Software Engineering Week5 Note</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-03-17 17:05:52" itemprop="dateCreated datePublished" datetime="2021-03-17T17:05:52+08:00">2021-03-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-08-01 17:40:27" itemprop="dateModified" datetime="2021-08-01T17:40:27+08:00">2021-08-01</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="week5_note">week5_Note</h1>
<h2 id="project">Project</h2>
<p>Rules for submitting pull requests</p>
<h2 id="project-rules-what-not-to-do-when-making-pull-requestpr">Project Rules: What not to do when making pull request(PR)?</h2>
<ul>
<li>Need to change the code to resolve conflicts so that developers can merge cleanly</li>
<li>No communication with the user and developer. Only fixing the way you like.</li>
<li>Do not choose documentation related issue.</li>
<li>Do not adding too many commits to your PR. You PR should be short.</li>
<li>Make minimal changes to current code. A PR that change less lines will be more likely to be accepted!</li>
<li>Hit-and run PR: commits and run away without responding. This is very bad practice because:
<ul>
<li>Waste time of developer in code review</li>
<li>Developers need to correct you mistake because you didn;t even check if you are implementing the correct issue</li>
<li>Developer mention you several times but do not respond. Leave a bad reputation in GitHub.</li>
</ul></li>
</ul>
<h2 id="recap-failure-and-errors">Recap: Failure and errors</h2>
<ul>
<li>Why is the difference between failure and errors?
<ul>
<li>计算、观察或测量值或条件，与真实、规定或理论上正确的值或条件之间的差异（Discrepancy between a computed, observed or measured value or condition and the true, specified, or theoretically correct value or condition.），可译为“错误”。Error是能够导致系统出现Failure的系统内部状态。</li>
<li>Failure：当一个系统不能执行所要求的功能时，即为Failure，可译为“失效”。（Termination of the ability of an element or an item to perform a function as required.)</li>
</ul></li>
</ul>
<h2 id="test-driven-developmenttdd">Test Driven Development(TDD)</h2>
<p>One of the core practices in XP</p>
<h2 id="kent-becks-rules">Kent Beck's rules</h2>
<ul>
<li>Beck's concept of test-driven development centers on two basic rules.</li>
<li>Eliminate duplication.</li>
</ul>
<h2 id="ambiguity-in-informal">Ambiguity in Informal</h2>
<p>If the maintenance contract number provided by the customer is not valid?</p>
<ul>
<li>Contract number cannot contain alphabets or special characters</li>
<li>Contract number must be 5 digits</li>
<li>Contract number cannot start with 0?</li>
</ul>
<h2 id="steps-in-test-driven-development-tdd">Steps in Test Driven Development (TDD)</h2>
<ul>
<li>The iterative process
<ul>
<li>Quickly add a test.</li>
<li>Run all tests and see the new one fail.</li>
<li>Make a little change to code.</li>
<li>Run all tests and see them all succeed.</li>
<li>Refactor to remove duplication</li>
</ul></li>
</ul>
<h2 id="which-example-has-better-tests">Which example has better tests?</h2>
<ul>
<li>Each test should be independent of each other</li>
<li>Any given behaviour should be specified in one and only</li>
<li>Correct method signature should be assertEquals(expected,actual)</li>
<li>Use .equals() to compare strings</li>
</ul>
<h2 id="is-there-a-standard-measurement-for-test-quality">Is there a standard measurement for test quality</h2>
<p>Yes, code coverage!</p>
<h2 id="what-is-code-coverage">What is Code Coverage</h2>
<ul>
<li>Code coverage is a measure used to describe <strong>the degree to which the source code of a program is executed when a particular</strong> <em>test suite runs</em>(A form of dynamic analysis)</li>
<li>Code Coverage is classified as a <strong>White box testing</strong>
<ul>
<li>White Box testing: Testing where <strong>internal structure/ design/ implementation of the item</strong> being tested <strong>is known</strong></li>
</ul></li>
</ul>
<h2 id="benefits-of-code-coverage">Benefits of Code Coverage</h2>
<ul>
<li>Identify untested part of codebase</li>
<li>Improve the quality by imporved test coverage</li>
<li>Identify testing gaps or missing tests</li>
<li>Identify the redundant/dead code</li>
</ul>
<h2 id="coverage-criteria">Coverage Criteria</h2>
<p>To measure what percentage of code has been exercised by a test suite, one or more coverage</p>
<ul>
<li>Instructions Coverage
<ul>
<li>Method’s bytecode stream is a sequence of instructions for JVM</li>
<li>The Bytecode for a method are executed when that method is invoked.</li>
</ul></li>
<li>Statements Coverage
<ul>
<li>Reports whether each executable statement was executed</li>
</ul></li>
<li>Branch Coverage
<ul>
<li>Reports whether Boolean expressions evaluate to true</li>
</ul></li>
<li>Method Coverage
<ul>
<li>Reports whether a method (function) was invoked while testing the application</li>
</ul></li>
<li>Class Coverage
<ul>
<li>Report of number of classes from the code base covered.</li>
</ul></li>
</ul>
<h2 id="equation-for-computing-coverage">Equation for Computing Coverage</h2>
<p><span class="math display">\[\text{Statement Coverage} = \frac{\text{Number of executed statements}}{\text{Total number of statements}} \times 100\]</span></p>
<p><span class="math display">\[
\text{Branch Coverage} = \frac{\text{Number of Executed Branches}}{\text{Total number of Branches}} \times 100
\]</span></p>
<h2 id="code-coverage-analysis-process">Code Coverage Analysis Process</h2>
<ul>
<li>Writing test cases and execute them</li>
<li>Finding areas of code not covered using Code Coverage Tool</li>
<li>Creating additional tests for identified gaps to increase test coverage</li>
<li>Determining a quantitative measure of code coverage</li>
</ul>
<h2 id="code-coverage-using-jacoco">Code Coverage using JaCoCo</h2>
<ul>
<li>JaCoCo is an open source code coverage Tool for Java, which has been created by the EclEmma team
<ul>
<li>Configure JaCoCo agent with JVM of your system to instrument java classes</li>
<li>.EXEC file gets generated while the test cases are executed on the sys</li>
<li>Generate Code Coverage report using ant (in different format)</li>
</ul></li>
</ul>
<h2 id="mutation-testing">Mutation Testing</h2>
<h3 id="general-view">General View</h3>
<p>We are performing muttion analysis whenever we</p>
<ul>
<li>use well defined rules(mutation operators)</li>
<li>defined on syntactic description(grammars)</li>
<li>to make <strong>systematic changes</strong>(Applied universally or according to empirically verified distribution)</li>
<li>to the <strong>syntax</strong> or to <strong>objects</strong> developed from the syntax</li>
</ul>
<h2 id="why-mutation">Why Mutation?</h2>
<ul>
<li>Mutant processes are created to try to mimic typical syntactic errors made by program</li>
<li>Many differing <strong>mutants</strong> are run against the specified tests to assess the quality of the tests</li>
<li>The tests are attributed a score between 0 and 1, as to whether they can distinguish between the original and the mutants.</li>
</ul>
<h2 id="mutators">Mutators</h2>
<p>Mutators are patterns applied to source code to produce mutations</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://yidaoxiangan.com/blog/2021/03/13/CS302-Operating-System-Note-2021-03-13-CS302-Operating-System-Week4-Note/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="异道相安">
      <meta itemprop="description" content="不觉茫茫道路长">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="异道相安的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/2021/03/13/CS302-Operating-System-Note-2021-03-13-CS302-Operating-System-Week4-Note/" class="post-title-link" itemprop="url">CS302 Operating System Week4 Note</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-03-13 12:53:48" itemprop="dateCreated datePublished" datetime="2021-03-13T12:53:48+08:00">2021-03-13</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-08-01 17:37:39" itemprop="dateModified" datetime="2021-08-01T17:37:39+08:00">2021-08-01</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="lecture-3-process-i">Lecture 3: Process I</h1>
<h2 id="what-is-a-process">What is a process?</h2>
<ul>
<li>Process is a program in execution</li>
<li>It contains every accounting information of that running program e.g.
<ul>
<li>Current program counter</li>
<li>Accumulated running time</li>
<li>The list of files that are currently opened by that program</li>
<li>The page table</li>
</ul></li>
<li>Important concept: Process control block</li>
</ul>
<h2 id="what-is-a-process-1">What is a process</h2>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ ls | cat | cat</span><br><span class="line">[ctrl + C]</span><br><span class="line">$</span><br></pre></td></tr></table></figure>
<ul>
<li>The command involves <strong>three processes</strong></li>
<li>It will stop early if I send a <strong>signal</strong> to interrupt it</li>
<li>Its progress is determined by the <strong>scheduler</strong></li>
<li>The three processes <strong>cooperate</strong> to give useful output</li>
</ul>
<h3 id="what-are-those-two-cats">What are those two "cats"?</h3>
<ul>
<li>2 different processes using the same code "/bin/cat"</li>
</ul>
<h3 id="our-roadmap">Our Roadmap</h3>
<ol type="1">
<li>How to distinguish the two cats?</li>
<li>Who (and hwo to) create the processes?</li>
<li>Which should run first?</li>
<li>What are those pipes?</li>
<li>What if "ls" is feeding data too fast? ill the "cat" feels full and dies?</li>
</ol>
<h2 id="process-identification">Process identification</h2>
<ul>
<li>How can we identify processes from one to another?
<ul>
<li>Each process is given an unique ID number, and is called the processes ID, or the PID</li>
<li>The system call, getpid(), prints the PID of the calling process.</li>
</ul></li>
</ul>
<h2 id="process-creation">Process creation</h2>
<ul>
<li>To create a process, we use the system call fork().</li>
</ul>
<h2 id="process-creation---fork-system-call">Process creation - fork() system call</h2>
<ul>
<li>So, how do fork() and the processes behave?</li>
<li>What do we know?
<ul>
<li>Both the parent and the child execute the same program</li>
<li>The child process starts its execution at the location that fork() is returned, not from the beginning of the program</li>
</ul></li>
</ul>
<h3 id="let-there-be-only-one-cpu">Let there be only ONE CPU</h3>
<ul>
<li>Only one process is allowed to be executed at one time</li>
<li>However, we can't predict which process will be chosen by the OS</li>
<li>That is controlled by the OS's scheduler</li>
</ul>
<p>IMPORTANT: For child, the return value of fork() is zero</p>
<p>关于fork如何实现形式上返回两个值，详见<a target="_blank" rel="noopener" href="https://www.zhihu.com/question/24173190/answer/244790670">此文章</a></p>
<h3 id="fork-behaves-like-cell-division">fork() behaves like "cell division"</h3>
<ul>
<li>It creates the child process by cloning from the parent process, including all user-space data e.g.</li>
</ul>
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Cloned items</th>
<th style="text-align: left;">Descriptions</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Program counter[CPU register]</td>
<td style="text-align: left;">That's why they both execute from the same line of code after fork() returns</td>
</tr>
<tr class="even">
<td style="text-align: left;">Program code[file &amp; memory]</td>
<td style="text-align: left;">They are sharing the same piece of code.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Memory</td>
<td style="text-align: left;">Including local variables, global variables, and dynamically allocated memory</td>
</tr>
<tr class="even">
<td style="text-align: left;">Opened files[Kernel's internal]</td>
<td style="text-align: left;">If the parent has opened a file "A", then the child will also have file "A" opened automatically.</td>
</tr>
</tbody>
</table>
<ul>
<li>However
<ul>
<li>fork() does not clone the following</li>
<li>Note: PCB is in the kernel space</li>
</ul></li>
</ul>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Distinct items</th>
<th style="text-align: left;">Parent</th>
<th style="text-align: left;">Child</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Return value of fork()</td>
<td style="text-align: left;">PID of the child process</td>
<td style="text-align: left;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">PID</td>
<td style="text-align: left;">Unchanged</td>
<td style="text-align: left;">Different, not necessarily be "Parent PID + 1"</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Parent process</td>
<td style="text-align: left;">Unchanged</td>
<td style="text-align: left;">Parent</td>
</tr>
<tr class="even">
<td style="text-align: left;">Running time</td>
<td style="text-align: left;">Cumulated</td>
<td style="text-align: left;">Just created, so should be 0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">[Advanced] File locks</td>
<td style="text-align: left;">Unchanged</td>
<td style="text-align: left;">None</td>
</tr>
</tbody>
</table>
<h2 id="fork-can-only-duplicate">fork() can only duplicate</h2>
<ul>
<li>If a process can only duplicate itself and always runs the same program, it's not quite meaningful
<ul>
<li>how can we execute other programs?</li>
</ul></li>
<li>We want CHANGE!
<ul>
<li>Meet the exec*() system call family</li>
</ul></li>
</ul>
<h2 id="exec">exec</h2>
<ul>
<li>execl() - member of the exec system call family(and the family has 6 members)</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;before execl ...\n&quot;</span>);</span><br><span class="line">execl(<span class="string">&quot;/bin/ls&quot;</span>, <span class="string">&quot;/bin/ls&quot;</span>, <span class="literal">NULL</span>);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;after execl ...\n&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>Arguments of the execl() call</p>
<ul>
<li>1st argument: the program name, “/bin/ls” in the example.</li>
<li>2nd argument: argument[0] to the program.</li>
<li>3rd argument: argument[1] to the program.</li>
</ul>
<h2 id="exec-1">exec</h2>
<ul>
<li>The process is changing the code that is executing and never returns to the original code
<ul>
<li>The last two lines of codes are therefore not executed</li>
</ul></li>
<li>The process that call an exec* system call will <strong>replace</strong> user-space info e.g.,
<ul>
<li>Program Code</li>
<li>Memory: local variables, global variables, and dynamically allocated memory</li>
<li>Register value: e.g.m the program counter</li>
</ul></li>
<li>But, the kernel-space info of that process is preserved, including:
<ul>
<li>PID</li>
<li>Process relationship</li>
<li>etc.</li>
</ul></li>
</ul>
<h2 id="when-fork-meets-exec">When fork() meets exec*()</h2>
<ul>
<li>To implement the core part of a shell</li>
<li>To implement the C library call system()</li>
</ul>
<h2 id="fork-exec-system">fork() + exec*() = system()</h2>
<ul>
<li>It si very weird to allow different execution orders</li>
<li>How to let tht child to execute first?
<ul>
<li>But... we can't control the <strong>OS scheduler</strong></li>
</ul></li>
<li>Then, our problem becomes...
<ul>
<li>How to <strong>suspend</strong> the execution of the parent process?</li>
<li>How to wake the parent up after the child is terminated?</li>
</ul></li>
</ul>
<h3 id="fork-execl-wait-system">fork() + exec*(l + wait() = system()</h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">system_ver_CS302</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *cmd_str)</span> </span>&#123;</span><br><span class="line"> <span class="keyword">if</span>(cmd_str == <span class="number">-1</span>)</span><br><span class="line">  <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line"> <span class="keyword">if</span>(fork() == <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="built_in">execl</span>(<span class="string">&quot;/bin/sh&quot;</span>, <span class="string">&quot;/bin/sh&quot;</span>, <span class="string">&quot;-c&quot;</span>, cmd_str, <span class="literal">NULL</span>);</span><br><span class="line">    <span class="built_in">fprintf</span>(stderr, <span class="string">&quot;%s: command not found\n&quot;</span>, cmd_str);</span><br><span class="line">    <span class="built_in">exit</span>(<span class="number">-1</span>);</span><br><span class="line">  &#125;</span><br><span class="line"><span class="built_in">wait</span>(<span class="literal">NULL</span>);</span><br><span class="line"> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> <span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"> <span class="built_in">printf</span>(<span class="string">&quot;before...\n\n&quot;</span>);</span><br><span class="line"> <span class="built_in">system_ver_CS302</span>(<span class="string">&quot;/bin/ls&quot;</span>);</span><br><span class="line"> <span class="built_in">printf</span>(<span class="string">&quot;\nafter...\n&quot;</span>);</span><br><span class="line"> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<h3 id="process-life-cycleuser-space">Process Life Cycle(user-space)</h3>
<h3 id="wait---user-space">wait() - user-space</h3>
<p>wait() system call</p>
<ul>
<li>suspend the calling process to waiting state and return (wakes up) when
<ul>
<li>one of its child processes changes from
<ul>
<li>running to terminated</li>
</ul></li>
<li>Or a signal is received(will cover)</li>
</ul></li>
<li>return immediately(i.e., does nothing) fi
<ul>
<li>It has no children
<ul>
<li>Or a child terminates before the parent calls wait for</li>
</ul></li>
</ul></li>
</ul>
<h3 id="wait-vs-waitpid">wait() vs waitpid()</h3>
<p>wait()</p>
<ul>
<li>wait for any one of the children</li>
<li>Detect child termination</li>
</ul>
<p>waitpid()</p>
<ul>
<li>depending on the parameters, waitpid() will wait for a particular child only</li>
<li>Depending on the parameters, waitpid() multiple child's status change</li>
</ul>
<h2 id="summary">summary</h2>
<ul>
<li>A new process is created by <strong>fork()</strong>
<ul>
<li>Who is the first process</li>
</ul></li>
<li>A process is a program being brought by <strong>exec</strong> to the memory
<ul>
<li>has state(initial state = ready)</li>
<li>waiting for the OS to schedule the CPU to run it</li>
</ul></li>
<li>Can a process execute more than one program?
<ul>
<li>Yes, keeps on calling the <strong>exec</strong> system call family</li>
</ul></li>
<li>You now know how system() C library call is implemented by syscalls fork(), exec(), and wait()</li>
</ul>
<h2 id="exec-arguments-explained">exec*() – arguments explained</h2>
<ul>
<li>Environment variables</li>
<li>A set of strings maintained by the shell.</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv, <span class="keyword">char</span> **envp)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> i;</span><br><span class="line">  <span class="keyword">for</span>(i = <span class="number">0</span>; envp[i]; i++)</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, envp[i]);</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The “**envp” variable is an array of string</p>
<p>A string is an array of characters</p>
<ul>
<li>Environment variables
<ul>
<li>A set of strings maintained by the shell.</li>
<li>Quite a number of programs will read and make use of the environment variable.</li>
</ul></li>
</ul>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Variable name</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">SHELL</td>
<td style="text-align: left;">The path to the shell that you're using</td>
</tr>
<tr class="even">
<td style="text-align: left;">PWD</td>
<td style="text-align: left;">The full path to the directory that you’re currently on.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">HOME</td>
<td style="text-align: left;">The full path to your home directory</td>
</tr>
<tr class="even">
<td style="text-align: left;">USER</td>
<td style="text-align: left;">Your login name.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">EDITOR</td>
<td style="text-align: left;">Your default text editor.</td>
</tr>
<tr class="even">
<td style="text-align: left;">PRINTER</td>
<td style="text-align: left;">Your default printer</td>
</tr>
</tbody>
</table>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://yidaoxiangan.com/blog/2021/03/12/CS302-Operating-System-Note-2021-03-12-CS302-Operating-System-Week3-Note/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="异道相安">
      <meta itemprop="description" content="不觉茫茫道路长">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="异道相安的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/2021/03/12/CS302-Operating-System-Note-2021-03-12-CS302-Operating-System-Week3-Note/" class="post-title-link" itemprop="url">CS302 Operating System Week3 Note</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-03-12 18:16:40" itemprop="dateCreated datePublished" datetime="2021-03-12T18:16:40+08:00">2021-03-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-08-01 17:37:04" itemprop="dateModified" datetime="2021-08-01T17:37:04+08:00">2021-08-01</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="lecture-2-fundamental-os-concepts">Lecture 2 Fundamental OS Concepts</h1>
<h2 id="our-roadmap">Our roadmap</h2>
<ul>
<li>Computer organization revision</li>
<li>Kernel data structures in OS</li>
<li>OS history</li>
<li>Four fundamental OS concepts
<ul>
<li>Thread</li>
<li>Address space(with translation)</li>
<li>Process</li>
<li>Dual mode operation/ protection</li>
</ul></li>
</ul>
<h2 id="four-components-of-a-computer-system">Four Components of a computer system</h2>
<ul>
<li>Computer hardware</li>
<li>Operating system</li>
<li>system and application programs</li>
<li>user</li>
</ul>
<h2 id="computer-system-organization">Computer System Organization</h2>
<ul>
<li>Computer-system operation
<ul>
<li>One or more CPUs, device controllers connect through common bus providing access to shared memory</li>
<li>Concurrent execution of CPUs and devices competing for memory cycles</li>
</ul></li>
</ul>
<h2 id="kernel-data-structures">Kernel Data Structures</h2>
<ul>
<li>Many similar to standard programming data structures
<ul>
<li>Singly linked list</li>
<li>Doubly linked list</li>
<li>Circular linked list</li>
</ul></li>
<li>Binary search tree left &lt;= right
<ul>
<li>Search performance is O(n)</li>
<li>Balanced binary search tree is O(lgn)</li>
</ul></li>
<li>Hash function can create a hash map</li>
<li>Bitmap - string of n binary digits representing the status of n items</li>
<li>Linux data structures defined in include files &lt;linux/list.h&gt;,&lt;linux/kfifo.h&gt;,&lt;linux/rbtree.h&gt;</li>
</ul>
<h2 id="four-fundamental-os-concepts">Four Fundamental OS Concepts</h2>
<ul>
<li>Thread
<ul>
<li>Single unique execution context: fully describes program state</li>
<li>Program Counter, Register, Execution Flags, Stack</li>
</ul></li>
<li>Address space(with translation)
<ul>
<li>Programs execute in an <strong>address space</strong> that is distinct from the memory space of the physical machine</li>
</ul></li>
<li>Process
<ul>
<li>An instance of an executing program is "a progress consisting of an address and one or more threads of control"</li>
</ul></li>
<li>Dual mode operation / Protection
<ul>
<li>Only the "system" has the ability to access certain resources</li>
<li>The OS and the hardware are protected from user programs and user programs are isolated from one another by "controlling the translation" from program virtual addresses to machine physical addresses.</li>
</ul></li>
</ul>
<h2 id="os-bottom-line-run-programs">OS Bottom Line: Run Programs</h2>
<ul>
<li>Load instruction and data segments of executable file into memory</li>
<li>Create stack andd heap</li>
<li>Transfer control to program</li>
<li>Provide services to program</li>
<li>While protecting OS and program</li>
</ul>
<h2 id="first-os-concept-thread-of-control">First OS Concept: Thread of Control</h2>
<ul>
<li>Certain registers hold the <strong>context</strong> of thread
<ul>
<li>Stack pointer holds the address of the top of stack
<ul>
<li>Other conventions: Frame pointer, Heap pointer, Data</li>
</ul></li>
<li>May be defined by the instruction set architecture or by compiler conventions</li>
</ul></li>
<li>Thread; Single unique execution context
<ul>
<li>Program Counter, Register, Execution Flag, Stack</li>
</ul></li>
<li>A thread is executing on a processor when it is resident in the processor registers</li>
<li>PC register holds the address of executing instruction in the thread</li>
<li>Registers hold the root state fo the tread
<ul>
<li>The rest is "in memory"</li>
</ul></li>
</ul>
<h2 id="second-os-concept-programs-address-space">Second OS Concept: Program's address space</h2>
<ul>
<li>Address space: the set of accessible addresses + state associated with them</li>
<li>For a 32-bit processor there are 2^32 = 4 billion address</li>
<li>What happens when you read or write to an address?
<ul>
<li>Perhaps nothing</li>
<li>Perhaps acs like regular memory</li>
<li>Perhaps ignore writes</li>
<li>Perhaps causes I/O operation</li>
<li>Perhaps causes exception(fault)</li>
</ul></li>
</ul>
<h2 id="multiprogramming---multiple-threads-of-control">Multiprogramming - Multiple Threads of Control</h2>
<h2 id="how-can-we-give-the-illusion-of-multiple-processors">How can we give the illusion of multiple processors?</h2>
<ul>
<li>Assume a single processor: How do we provide the illusion of multiple processors?
<ul>
<li>Multiplex in time!</li>
</ul></li>
<li>Each virtual "CPU" needs a structure to hold:
<ul>
<li>Program Counter(PC), Stack Pointer(SP)</li>
<li>Registers(Integer, Floating point, others)</li>
</ul></li>
<li>How switch from one virtual CPU to the next
<ul>
<li>Save PC, SP, and registers in current state block</li>
<li>Load PC, SP, and registers from new state block</li>
</ul></li>
<li>what triggers switch?
<ul>
<li>Timer, voluntary yield, I/O, other things</li>
</ul></li>
</ul>
<h2 id="the-basic-problem-of-concurrency">The Basic Problem of Concurrency</h2>
<ul>
<li>The basic problem of concurrency involves resources:
<ul>
<li>Hardware: single CPU, single DRAM, single I/O devices</li>
<li>Multiprogramming API: processes think they have exclusive(独属的 ) access to shared resources</li>
</ul></li>
<li>OS has to coordinate all activities
<ul>
<li>Multiple processes, I/O interrupts, ...</li>
<li>How can it keep all these things straight?</li>
</ul></li>
<li>Basic Idea: Use Virtual Machine abstraction
<ul>
<li>Simple machine abstraction for processes</li>
<li>Multiplex these abstract machine</li>
</ul></li>
<li>Dra did this for "THE system"
<ul>
<li>Few thousand lines vs 1 million lines in OS 360(1K bugs)</li>
</ul></li>
</ul>
<h2 id="properties-of-this-simple-multiprogramming-technique">Properties of this simple multiprogramming technique</h2>
<ul>
<li>All virtual CPUs share same non-CPU resources
<ul>
<li>I/O devices the same</li>
<li>Memory the same</li>
</ul></li>
<li>Consequence of sharing:
<ul>
<li>Each thread can access the data of every other thread(good for sharing, bad for protection)</li>
<li>Threads can share instructions(good for sharing, bad for protection)</li>
<li>Can threads overwrite OS functions?</li>
</ul></li>
<li>This (unprotected) model is common in:
<ul>
<li>Embedded application</li>
<li>Windows 3.1 / Early Macintosh(switch only with yield)</li>
<li>windows 95 - ME(switch with both yield and timer)</li>
</ul></li>
</ul>
<h2 id="protection">Protection</h2>
<ul>
<li>Operating System must protect itself from user programs
<ul>
<li>Reliability: compromising the operating system generally causes it to crash</li>
<li>Security: limit the scope of what processes can do</li>
<li>Privacy: limit each process to the data it is permitted to access</li>
<li>Fairness: each should be limited to its appropriate share of system resources(CPU time, memory, I/O, etc)</li>
</ul></li>
<li>It must protect User programs from one another</li>
<li>Primary Mechanism: limit the translation from program address space to physical memory space
<ul>
<li>Can only touch what is mapped into process "address space"</li>
</ul></li>
<li>Additional Mechanisms:
<ul>
<li>Privileged instructions, in/out instructions, special register</li>
<li>syscall processing, subsystem implementation
<ul>
<li>e.g., file access rights, etc</li>
</ul></li>
</ul></li>
</ul>
<h2 id="third-os-concept-process">Third OS Concept: Process</h2>
<ul>
<li>Process: execution environment with Restricted Rights
<ul>
<li>Address Space with One or More Threads</li>
<li>Owns memory(address space)</li>
<li>Owns file descriptors, file system context, ...</li>
<li>Encapsulate one or more threads sharing process resources</li>
</ul></li>
<li>Why processes?
<ul>
<li>Protected from each other!</li>
<li>OS Protected from them</li>
<li>Processes provides memory protection</li>
<li>Threads more efficient than processes(later)</li>
</ul></li>
<li>Fundamental tradeoff between protection andd efficiency
<ul>
<li>Communication easier within a process</li>
<li>Communication harder between processes</li>
</ul></li>
<li>Application instance consists of one or more processes</li>
</ul>
<h2 id="single-and-multithreaded-processes">Single and Multithreaded Processes</h2>
<ul>
<li>Threads encapsulate concurrency:"Active" component</li>
<li>Address spaces encapsulate protection: "Passive" part
<ul>
<li>Keeps buggy program from trashing the system</li>
</ul></li>
<li>Why have multiple threads per address space?</li>
</ul>
<h2 id="fourth-os-concept-dual-mode-operation">FOurth OS Concept: Dual Mode Operation</h2>
<ul>
<li>Hardware provides at least two modes:
<ul>
<li>"Kernel" mode(or "supervisor" or "protected")</li>
<li>"User" mode: Normal programs executed</li>
</ul></li>
<li>What is needed in the hardware to support "dual mode" operation?
<ul>
<li>A bit of state (user/system mode bit)</li>
<li>Certain operations/ actions only permitted in system/kernel mode</li>
<li>Certain operations / actions only permitted in system/kernel mode
<ul>
<li>In user mode they fail or trap</li>
</ul></li>
</ul></li>
<li>User -&gt; Kernel transition sets system mode AND saves the user PC
<ul>
<li>Operating system code carefully puts aside user state then performs the necessary operations</li>
</ul></li>
<li>Kernel -&gt; User transition clears system mode AND restores appropriate user PC
<ul>
<li>return-from-interrupt</li>
</ul></li>
</ul>
<h2 id="unix-system-structure">Unix System Structure</h2>
<ul>
<li>User Mode
<ul>
<li>Applications</li>
<li>Standard Libs :
<ul>
<li>shells and commands</li>
<li>compilers and interpreters</li>
<li>system libraries</li>
</ul></li>
</ul></li>
<li>Kernel Mode
<ul>
<li>system-call interface to the kernel</li>
<li>signals terminal handling</li>
<li>character I/O system</li>
<li>terminal drivers</li>
<li>file system</li>
<li>swapping block I/O system</li>
<li>disk adn tape drivers</li>
<li>CPU scheduling</li>
<li>page replacement</li>
<li>demand paging</li>
<li>virtual memory</li>
<li>kernel interface to the hardware</li>
</ul></li>
<li>Hardware
<ul>
<li>terminal controllers</li>
<li>terminals</li>
<li>device controllers</li>
<li>disks and tapes</li>
<li>memory controllers</li>
<li>physical memory</li>
</ul></li>
</ul>
<h2 id="simple-protection-base-and-boundbb">Simple Protection: Base and bound(B&amp;B)</h2>
<ul>
<li>Requires relocating loader</li>
<li>Still protects OS and isolates program</li>
<li>No addition on address path</li>
</ul>
<h2 id="another-idea-address-space-translation">Another idea: Address Space Translation</h2>
<ul>
<li>Program operates in an address space that isn distinct from the physical memory space of the machine</li>
</ul>
<h2 id="a-simple-address-translation-with-base-and-bound">A simple address translation with Base and Bound</h2>
<ul>
<li>Can the program touch OS?</li>
<li>Can it touch other programs?</li>
</ul>
<h2 id="tying-it-together-simple-bb-os-loads-process">Tying it together: Simple B&amp;B: OS loads process</h2>
<h2 id="simple-bb-os-gets-ready-to-execute-process">Simple B&amp;B: OS gets ready to execute process</h2>
<ul>
<li>Privileged Inst: set special registers</li>
<li>RTU</li>
</ul>
<h2 id="simple-bb-user-code-running">Simple B&amp;B: User Code Running</h2>
<h2 id="types-of-mode-transfer">3 types of Mode Transfer</h2>
<ul>
<li>Syscall
<ul>
<li>Process requests a system service, e.g., exit</li>
<li>Like a function call, but "outside" the process</li>
<li>Does not have the address of the system function to call</li>
<li>Like a Remote Procedure Call(RPC) - for later</li>
<li>Marshall the syscall id and args in registers and exec syscall</li>
</ul></li>
<li>Interrupt
<ul>
<li>External asynchronous event triggers context switch</li>
<li>e.g., Timer, I/O device</li>
<li>Independent of user process</li>
</ul></li>
<li>Trap or Exception
<ul>
<li>Internal synchronous event in process triggers context switch</li>
<li>el.g., Protection violation(segmentation fault), Divide by zero,...</li>
</ul></li>
<li>All 3 are UNPROGRAMMED CONTROL TRANSFER
<ul>
<li>Where does it go?</li>
</ul></li>
</ul>
<h2 id="how-do-we-get-the-system-target-address-of-the-unprogrammed-control-transfer">How do we get the system target address of the "unprogrammed control transfer?"</h2>
<h2 id="interrupt-vector">Interrupt Vector</h2>
<ul>
<li>Address and properties of each interrupt handler</li>
</ul>
<h2 id="simple-bb-user-kernel">Simple B&amp;B: User =&gt; Kernel</h2>
<ul>
<li>How to return to system?j</li>
</ul>
<h2 id="simple-bb-interrupt">Simple B&amp;B: Interrupt</h2>
<ul>
<li>How to save registers and set up system stack?</li>
</ul>
<h2 id="simple-bb-switch-user-process">Simple B&amp;B: Switch User Process</h2>
<h2 id="simple-bb-resume">Simple B&amp;B: "resume"</h2>
<h2 id="dual-mode-operation">Dual Mode Operation</h2>
<h2 id="conclusion-four-fundamental-os-concepts">Conclusion: Four fundamental OS concepts</h2>
<ul>
<li>Thread</li>
<li>Address Space with Translation</li>
<li>Process</li>
<li>Dual Mode operation/Protection</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://yidaoxiangan.com/blog/2021/03/12/%E8%A5%BF%E6%96%B9%E5%93%B2%E5%AD%A6%E5%AF%BC%E8%AE%BA-Note-2021-03-12-%E8%A5%BF%E6%96%B9%E5%93%B2%E5%AD%A6%E5%AF%BC%E8%AE%BA-Week4-Note/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="异道相安">
      <meta itemprop="description" content="不觉茫茫道路长">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="异道相安的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/2021/03/12/%E8%A5%BF%E6%96%B9%E5%93%B2%E5%AD%A6%E5%AF%BC%E8%AE%BA-Note-2021-03-12-%E8%A5%BF%E6%96%B9%E5%93%B2%E5%AD%A6%E5%AF%BC%E8%AE%BA-Week4-Note/" class="post-title-link" itemprop="url">西方哲学导论 Week4 Note</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-03-12 16:37:08" itemprop="dateCreated datePublished" datetime="2021-03-12T16:37:08+08:00">2021-03-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-08-01 17:38:35" itemprop="dateModified" datetime="2021-08-01T17:38:35+08:00">2021-08-01</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="week4_note">Week4_note</h1>
<h2 id="高尔吉亚-gorgias-公元前480---前370">高尔吉亚 （Gorgias 公元前480 - 前370）</h2>
<ul>
<li>三个命题
<ul>
<li>无物存在</li>
<li>如果有物存在，人也无法认识</li>
<li>即使可以认识，也无法把它告诉别人</li>
</ul></li>
<li>解读：
<ul>
<li>第一，如果有物存在，怎么证明它真实存在？</li>
<li>第二，如果物可以认识，怎么证明对物的认识就是它本来的认识。</li>
<li>第三，如果可以将物的表达结果告诉别人，怎么证明语言表达的就是思想认识的内容？</li>
</ul></li>
</ul>
<h3 id="感觉与事物的真实状态是不一致的">感觉与事物的真实状态是不一致的</h3>
<p>感觉“不是按照真理”</p>
<h2 id="智者运动的历史地位">智者运动的历史地位</h2>
<p>全部智者学派运动的重大价值在于：激发了人们的思想，要求哲学，宗教，习俗，道德以及建立在他们之上的制度来辨明自己的合理性。智者否认认识的可能性，那就使有人有必要说明能够认识的代理。他们迫使哲学寻求认识的标准。他们评级传统道德，迫使道德反对怀疑主义和虚无主义来保护产出，找出是非的合理的原则。他们评级传统的宗教信仰，迫使思想家认为有必要找出更圆满和纯粹的神的观念。</p>
<h2 id="第二阶段苏格拉底哲学的形成">第二阶段，苏格拉底哲学的形成</h2>
<p>（苏格拉底， Socrates， 公元前469 - 前399年）</p>
<ul>
<li>述而不作</li>
<li>没有任何著作，其思想是通过”对话“报答，西方思想史上最伟大的哲学家之一。</li>
<li>长得很丑（？）</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://yidaoxiangan.com/blog/2021/03/11/2021%E8%85%BE%E8%AE%AF%E5%90%8E%E5%8F%B0%E5%BC%80%E5%8F%91%E6%9A%91%E6%9C%9F%E5%AE%9E%E4%B9%A0%E9%9D%A2%E7%BB%8F-3%E6%9C%8810%E6%97%A5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="异道相安">
      <meta itemprop="description" content="不觉茫茫道路长">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="异道相安的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/2021/03/11/2021%E8%85%BE%E8%AE%AF%E5%90%8E%E5%8F%B0%E5%BC%80%E5%8F%91%E6%9A%91%E6%9C%9F%E5%AE%9E%E4%B9%A0%E9%9D%A2%E7%BB%8F-3%E6%9C%8810%E6%97%A5/" class="post-title-link" itemprop="url">2021腾讯后台开发暑期实习面经 3月10日</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-03-11 18:27:08" itemprop="dateCreated datePublished" datetime="2021-03-11T18:27:08+08:00">2021-03-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-07-17 00:19:29" itemprop="dateModified" datetime="2021-07-17T00:19:29+08:00">2021-07-17</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="腾讯后台开发暑期实习面经-3月10日">2021腾讯后台开发暑期实习面经 3月10日</h1>
<p>8日投的简历，10日下午收到腾讯面试官的电话，预约当晚7点电话面试。非常高效。</p>
<h2 id="面试过程">面试过程</h2>
<p>晚7点面试官打来电话。先要求做自我介绍。</p>
<p>看到简历上C++相关项目，问是否用过STL库。答用过一些，提到了unordered_map。</p>
<p>面试官开始问unordered_map的底层细节。答不熟悉C++底层，学校使用Java入门。</p>
<h3 id="java">Java</h3>
<p>面试官转向Java，问Hashmap的底层实现和数据结构。</p>
<ul>
<li><p>问Hashmap的增删查改过程。</p></li>
<li><p>问Hashmap如何实现散列均匀。</p></li>
<li><p>问Hashmap为什么要用红黑树。</p></li>
<li><p>问Hashmap中数组过大怎么办。结合项目中稀疏矩阵提问。</p></li>
<li><p>问红黑树基本原理。</p></li>
<li><p>问AVL树原理。问AVL数如何保持平衡。问AVL数旋转过程。</p></li>
<li><p>问哈希函数原理，字符串哈希方法。</p></li>
<li><p>问Hashmap的哈希函数实现。</p></li>
<li><p>问Hashmap的扩容机制。</p></li>
<li><p>问需要存放大量数据是否适合使用Hashmap。</p></li>
<li><p>问使用Hashmap存放学校所有人信息，用姓名作为Key应该怎么存。有重名怎么办。</p></li>
</ul>
<h3 id="操作系统">操作系统</h3>
<p>问操作系统，答刚开始学，还没学完。遂没问操作系统的其他知识。</p>
<h3 id="网络">网络</h3>
<p>问计算机网络，先问是否了解http。</p>
<p>问TCP和UDP的区别。</p>
<p>问DNS请求过程。</p>
<p>问三次握手和四次挥手。</p>
<p>问在浏览器地址栏输入地址后敲下回车，发生了什么。</p>
<p>问不考虑机器运行时间，浏览器发起一个http请求后收到回应的第一个字符需要几个RTT。</p>
<p>问是否了解https。讲一下所知的。</p>
<h3 id="misc">MISC</h3>
<p>问十亿整数，如何查找前1000个大的数。(Top K 问题)</p>
<ul>
<li>问如何用字节流读取大文件。</li>
<li>问堆的数据结构实现。</li>
<li>问快速选择方法的具体思路。</li>
</ul>
<p>问十亿整数，如何查找中位数。</p>
<p>问十亿总数，如何统计出现频率最高的K个数字。</p>
<h3 id="手撕代码">手撕代码</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 将ip地址转换为点分16进制字符串</span></span><br><span class="line"><span class="comment">// e.g. 0 -&gt; 0.0.0.0</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">convert</span><span class="params">(<span class="keyword">int</span> ip)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// code here</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<h3 id="反问环节">反问环节</h3>
<p>问面试官是什么事业群的。答TEG。</p>
<p>问大概还有几轮面试，什么时候进行下一轮。答过了的话几天内会有人联系，大约还有两三轮。</p>
<p>问有何建设性意见。答没有特别的意见。</p>
<h3 id="没有问到的内容">没有问到的内容</h3>
<p>数据库</p>
<p>设计模式</p>
<p>简历项目</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">异道相安</p>
  <div class="site-description" itemprop="description">不觉茫茫道路长</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">24</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">34</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  
  
  
  
</div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
          load: ['[tex]/mhchem'],
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
          packages: {'[+]': ['mhchem']},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  

</body>
</html>
