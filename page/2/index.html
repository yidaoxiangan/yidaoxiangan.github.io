<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico">
  <link rel="mask-icon" href="/images/favicon.ico" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yidaoxiangan.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":true,"preload":true},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="不觉茫茫道路长">
<meta property="og:type" content="website">
<meta property="og:title" content="异道相安的博客">
<meta property="og:url" content="https://yidaoxiangan.com/page/2/index.html">
<meta property="og:site_name" content="异道相安的博客">
<meta property="og:description" content="不觉茫茫道路长">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="异道相安">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://yidaoxiangan.com/page/2/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>异道相安的博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">
<!-- hexo injector head_end end --></head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">异道相安的博客</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://yidaoxiangan.com/blog/2021/03/20/CS302-Operating-System-Week5-Note-0x00/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="异道相安">
      <meta itemprop="description" content="不觉茫茫道路长">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="异道相安的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/2021/03/20/CS302-Operating-System-Week5-Note-0x00/" class="post-title-link" itemprop="url">CS302 Operating System Week5 Note 0x00</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-03-20 07:28:01" itemprop="dateCreated datePublished" datetime="2021-03-20T07:28:01+08:00">2021-03-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-07-17 00:19:29" itemprop="dateModified" datetime="2021-07-17T00:19:29+08:00">2021-07-17</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="user-space-invoke-system-calls">User space invoke system calls</h2>
<p>E.g.</p>
<ul>
<li>fork()</li>
<li>exec*()</li>
<li>wait()</li>
</ul>
<p>Kernel space keep PCB.</p>
<h2 id="when-invoking-a-system-callmemory-view">When invoking a system call(memory view)</h2>
<ul>
<li>When running a program code of a user process.</li>
<li>As the code is in use-space memory, so the program counter is pointing to that region.</li>
<li>When the process is calling the system call "getpid()".</li>
<li>Then, the CPU switches <strong>from the user-space to the kernel-space</strong>, and reads the PID of the process from the kernel.</li>
<li>When the CPU has finished executing the "getpid()" system call
<ul>
<li>It <strong>switches back to the user-space memory</strong>, and continues running that program code.</li>
</ul></li>
</ul>
<h2 id="when-invoking-a-system-call-cpu-view">When invoking a system call (CPU view)</h2>
<ul>
<li>user process
<ul>
<li>user process executing</li>
<li>call system call</li>
</ul></li>
<li>kernel
<ul>
<li>trap mode bit = 0</li>
<li>execute system call</li>
<li>return mode bit = 1</li>
</ul></li>
<li>return from system call</li>
</ul>
<h2 id="process-real-time-costwall-clock-time">Process real time cost(wall-clock time)</h2>
<h2 id="user-time-vs-system-time">User time VS System time</h2>
<ul>
<li>With the tool <strong>"time"</strong>
<ul>
<li>Real-time</li>
<li>user time</li>
<li>sys time</li>
</ul></li>
</ul>
<p>Accessing hardware costs the process more time.</p>
<ul>
<li><p>The user time and the sys time together <strong>define the performance of an application</strong></p></li>
<li>Function calls cause overhead
<ul>
<li>Stack pushing</li>
</ul></li>
<li>Sys calls may cause even more
<ul>
<li>Sys call is from another "process" (the kernel)</li>
<li>Switching to another "process" -&gt; context switch(will see later)</li>
</ul></li>
</ul>
<h2 id="fork-inside-the-kernel">fork() inside the kernel</h2>
<ul>
<li>Inside kernel, processes are arranged as a doubly linked list, called the <strong>task list</strong>.</li>
</ul>
<h2 id="fork-in-action---array-of-opened-files">fork() in action - array of opened files?</h2>
<p>Array of opened files contains:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Array Index</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">0</td>
<td style="text-align: left;">Standard Input Stream; FILE *stdin;</td>
</tr>
<tr class="even">
<td style="text-align: left;">1</td>
<td style="text-align: left;">Standard Output stream; FILE *stdout;</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2</td>
<td style="text-align: left;">Standard Error Stream; FILE *stderr;</td>
</tr>
<tr class="even">
<td style="text-align: left;">3 or beyond</td>
<td style="text-align: left;">Storing the files you opened. e.g., fopen(), open(), etc.</td>
</tr>
</tbody>
</table>
<ul>
<li><p>That's why a parent process <strong>shares the same terminal output stream</strong> as the child process.</p></li>
<li><p>Stream is just a <strong>logical</strong> object for you to read as a <strong>sequence of bytes</strong></p></li>
</ul>
<h2 id="working-of-system-calls-exec">Working of system calls exec*()</h2>
<ul>
<li>exec*()l is called</li>
<li>The process returns to user-space <strong>but is executing another program</strong></li>
</ul>
<h2 id="exec-in-action">exec*() in action</h2>
<ul>
<li>Process 1234 invoked exec*()</li>
<li>get in kernel space
<ul>
<li>kernel space will operate the memory of current process:
<ul>
<li>local variable is cleared</li>
<li>Dynamically-allocated memory is cleared</li>
<li>Global variable is reset based on the new code</li>
<li>Code and constants are changed to the new program code.</li>
</ul></li>
<li>The kernel will also
<ul>
<li>reset the register values(e.g., program counter)</li>
</ul></li>
</ul></li>
</ul>
<h2 id="working-of-system-calls-wait-and-exit">working of system calls wait() and exit()</h2>
<h2 id="exit-kernel-view">exit() kernel-view</h2>
<ul>
<li>The kernel frees all the allocated memory(I guess in kernel space).</li>
<li>The list of opened files are all closed.(So it's okay to skip fclosed()); though not recommended</li>
<li>Then, the kernel <strong>frees everything on the user-space memory</strong> about the concerned process, including program code and allocated memory.</li>
<li>Process ID stills in the kernel's process table
<ul>
<li>Why?
<ul>
<li>[Wiki] This entry is still needed to allow the process that started the (now zombie) process to read its exit status.</li>
</ul></li>
<li>The status of the child is now called <strong>zombie ("terminated")</strong>.</li>
</ul></li>
<li>Last but no least, the <strong>kernel</strong> notifies the <strong>parent</strong> of the child process about the termination of its child.</li>
<li>The kernel sends a SIGCHLD <strong>signal</strong> to the parent.</li>
</ul>
<h2 id="summary----what-the-kernel-does-for-exit">Summary -- what the kernel does for exit()</h2>
<ul>
<li>Step(1) Clean up most of the allocated kernel-space memory (e.g., process's running time info)</li>
<li>step(2) Clean up the exit process's user-space memory</li>
<li>Step(3) Notify the parent with SIGCHLD.</li>
</ul>
<h2 id="wait-kernel-views-registering-signal-handling-routine">wait() kernel view's registering signal handling routine</h2>
<ul>
<li>By default, every process does not respond to the SIGCHLD
<ul>
<li>i.g., the parent ignores his child unless he is waiting for the child</li>
</ul></li>
<li>But if a process has called <strong>wait()</strong>
<ul>
<li>The kernel will register a <strong>signal handling routine</strong> for that process.(in kernel space)</li>
</ul></li>
<li>When <strong>SIGCHLD</strong> comes, the corresponding <strong>signal handling routine is invoked</strong>!</li>
<li><p>Note: the parent is still inside the <strong>wait()</strong> system call</p></li>
<li>Default Handler of SIGCHLD registered by the kernel
<ul>
<li>Accept and remove the SIGCHLD signal</li>
<li>Destroy the child process in the <strong>kernel-space(remove it from process table, task-list, etc.)</strong></li>
</ul></li>
<li>The kernel
<ul>
<li>Deregisters the signal handling routine for the parent</li>
<li>returns the PID of the terminated child as the return value of <strong>wait()</strong></li>
</ul></li>
<li><p>The parent is ignoring <strong>SIGCHLD</strong> again</p></li>
</ul>
<h2 id="overall---normal-case">Overall - normal case</h2>
<p><img src="https://i.loli.net/2021/03/20/kYmM4vbSTXDjguI.png" /> <img src="https://i.loli.net/2021/03/20/JIPhXcKWqeum67s.png" /></p>
<h2 id="parents-wait-after-childs-exit">Parent's wait() after child's exit()</h2>
<p><img src="https://i.loli.net/2021/03/20/aAFH3YhZqIXnUmW.png" /> <img src="https://i.loli.net/2021/03/20/He8WFQhvETbtIsm.png" /></p>
<h2 id="wait-and-exit-short-summary">wait() and exit() short summary</h2>
<ul>
<li>exit() system call turns a process into a zombie when
<ul>
<li>The process call <strong>exit()</strong></li>
<li>The process returns from <strong>main()</strong></li>
<li>The process terminates abnormally
<ul>
<li>The kernel knows that the process is terminated abnormally. Hence, the kernel invokes <strong>exit()</strong> for it.</li>
</ul></li>
</ul></li>
<li><strong>wait()</strong> and <strong>waitpid()</strong> are to reap zombie child processes
<ul>
<li>It is a must that you should never leave any zombies in the system</li>
<li><strong>wait()</strong> and <strong>waitpid()</strong> pause the caller until
<ul>
<li>A child terminates/stops, OR</li>
<li>The caller receives a signal (i.e., the signal interrupted the <strong>wait()</strong>)</li>
</ul></li>
</ul></li>
<li>Linux will label zombie process as "<strong>&lt;defunct&gt;</strong>"</li>
<li>To look for them</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ps aux | grep defunct</span><br></pre></td></tr></table></figure>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> pid;</span><br><span class="line">    <span class="keyword">if</span>( (pid = fork()) !=<span class="number">0</span> ) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Look at the status of the child process %d\n&quot;</span>, pid);  </span><br><span class="line">        <span class="keyword">while</span>( <span class="built_in">getchar</span>() != <span class="string">&#x27;\n&#x27;</span> ); <span class="comment">// &quot;enter&quot; here. Child process is defunct/zombie</span></span><br><span class="line">        <span class="built_in">wait</span>(<span class="literal">NULL</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Look again!\n&quot;</span>); <span class="comment">// &quot;enter&quot; here. Child process vanish.</span></span><br><span class="line">    <span class="keyword">while</span>( <span class="built_in">getchar</span>() != <span class="string">&#x27;\n&#x27;</span> );</span><br><span class="line">&#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>This program requires you to type “enter” twice before the process terminates.</p>
<p>You are expected to see the status of the child process changes (ps aux [PID]) between the 1st and the 2nd “enter"</p>
<h2 id="calling-wait-is-important">Calling wait() is important</h2>
<ul>
<li>It is not only about process execution suspension…</li>
<li>It is about <strong>system resource management</strong>.
<ul>
<li>A zombie takes up a PID;</li>
<li>The total number of PIDs are limited;</li>
<li>Read the limit: <code>cat /proc/sys/kernel/pid_max</code></li>
<li>It is 32768.</li>
</ul></li>
<li>What will happen if we don’t clean up the zombies?</li>
</ul>
<h2 id="the-fork-bomb">The fork bomb</h2>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</span><br><span class="line"><span class="keyword">while</span>( fork() );</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Deliberately missing wait()</li>
<li>Do not try this on department’s machines…</li>
</ul>
<h2 id="the-first-process">The first process</h2>
<ul>
<li>We now focus on the process-related events
<ul>
<li>The kernel, while it is booting up, creates the first process – <strong>init</strong>.</li>
</ul></li>
<li>The <strong>init</strong> process:
<ul>
<li>has <strong>PID = 1</strong>, and</li>
<li>is running the program code <code>/sbin/init</code>.</li>
</ul></li>
<li>Its first task is to create more processes…
<ul>
<li>Using <strong>fork()</strong> and **exec*()**.</li>
</ul></li>
</ul>
<h2 id="process-blossoming">PRocess blossoming</h2>
<ul>
<li>You can view the tree with the command:
<ul>
<li><code>pstree</code> or</li>
<li><code>pstree -A</code> for the ASCII-character-only display. <img src="https://i.loli.net/2021/03/20/MepN8ycu5l9R2xK.png" /></li>
</ul></li>
</ul>
<h2 id="process-blossoming...-with-orphans">Process blossoming... with orphans?</h2>
<ul>
<li>However, termination can happen, at any time and in any place…
<ul>
<li>This is no good because an orphan turns the hierarchy from a <strong>tree</strong> into a <strong>forest</strong>!</li>
<li>Plus, no one would know the termination of the orphan. <img src="https://i.loli.net/2021/03/20/8C2vnly7B4OI9S6.png" /></li>
</ul></li>
</ul>
<h2 id="process-blossomingwith-re-parent">Process blossoming…with re-parent</h2>
<ul>
<li>In Linux
<ul>
<li>The <strong>init</strong> process will become the step-mother of all orphans</li>
<li>It's called <strong>re-parenting</strong></li>
</ul></li>
<li>In Windows
<ul>
<li>It maintains a forest-like process hierarchy...... <img src="https://i.loli.net/2021/03/20/gtrRVB4wQEjcJ9x.png" /></li>
</ul></li>
</ul>
<h2 id="re-parenting-example">Re-parenting example</h2>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i;</span><br><span class="line">    <span class="keyword">if</span>(fork() == <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">       <span class="built_in">printf</span>(<span class="string">&quot;(%d) parent&#x27;s PID = %d\n&quot;</span>,</span><br><span class="line">       <span class="built_in">getpid</span>(), <span class="built_in">getppid</span>() );</span><br><span class="line">       <span class="built_in">sleep</span>(<span class="number">1</span>);</span><br><span class="line">       &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">       <span class="built_in">sleep</span>(<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;(%d) bye.\n&quot;</span>, <span class="built_in">getpid</span>());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ ./reparent</span><br><span class="line">(1235) parent<span class="string">&#x27;s PID = 1234</span></span><br><span class="line"><span class="string">(1235) parent&#x27;</span>s PID = 1234</span><br><span class="line">(1234) <span class="built_in">bye</span>.</span><br><span class="line">$ (1235) parent’s PID = 1</span><br><span class="line">(1235) parent’s PID = 1</span><br><span class="line">(1235) parent’s PID = 1</span><br><span class="line">(1235) <span class="built_in">bye</span>.</span><br></pre></td></tr></table></figure>
<h2 id="what-had-happened-during-re-parenting">What had happened during re-parenting?</h2>
<p><img src="https://i.loli.net/2021/03/20/HaXNdsfRWzAu3xM.png" /> <img src="https://i.loli.net/2021/03/20/rKSyb39t6cUqdOF.png" /></p>
<h2 id="background-jobs">Background jobs</h2>
<ul>
<li>The re-parenting operation enables something called <strong>background jobs</strong> in Linux
<ul>
<li>It allows a process runs without a parent terminal/shell</li>
</ul></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ ./infinite_loop &amp;</span><br><span class="line">$ <span class="built_in">exit</span></span><br><span class="line">[ The shell is gone ]</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ ps –C infinite_loop</span><br><span class="line"></span><br><span class="line">PID TTY</span><br><span class="line">1234 ... ./infinite_loop</span><br><span class="line"></span><br><span class="line">$ _ </span><br></pre></td></tr></table></figure>
<h2 id="process-lifecycle">Process lifecycle</h2>
<p><img src="https://i.loli.net/2021/03/20/Rvua5wCxG8TN4h9.png" /></p>
<h2 id="process-lifecycle---ready">Process lifecycle - Ready</h2>
<p><img src="https://i.loli.net/2021/03/20/uSARTdtOzioGFg4.png" /></p>
<h2 id="process-lifecycle---running">Process lifecycle - Running</h2>
<p><img src="https://i.loli.net/2021/03/20/OqcYJzE9DfIQFmb.png" /></p>
<h2 id="process-lifecycle---blocking">Process lifecycle - Blocking</h2>
<p><img src="https://i.loli.net/2021/03/20/eRZ1UKxXsPwj37u.png" /></p>
<h2 id="process-lifecycle---interruptible-wait">Process lifecycle - Interruptible wait</h2>
<ul>
<li>Example. <strong>Reading a file.</strong>
<ul>
<li>Sometimes, the process has to wait for the response from the device and, therefore, it is blocked
<ul>
<li>this blocking state is <strong>interruptible</strong></li>
<li>E.g., “Ctrl + C” can get the process out of the waiting state (but goes to termination state instead).</li>
</ul></li>
</ul></li>
</ul>
<h2 id="process-lifecycle---un-interruptible-wait">Process lifecycle - Un-Interruptible wait</h2>
<p>Sometimes, a process needs to wait for a resource until it really gets what it wants</p>
<ul>
<li>Doesn’t want to be “Ctrl-C” interruptible</li>
<li><strong>Un-interruptible status</strong>
<ul>
<li>No way to signal it to wake up unless it returns itself</li>
<li>Check online! The only solution is … Who set this?</li>
<li>E.g., <a target="_blank" rel="noopener" href="http://man7.org/linux/man-pages/man2/delete_module.2.html">syscall call</a></li>
</ul></li>
<li>Why set this?
<ul>
<li>Easier programming for lazy programmer (e.g., a driver program for a DVD drive)</li>
<li>The programmer “thinks” the wait is very short and robust .
<ul>
<li>This is one the top reasons that hang your machine / process today!</li>
</ul></li>
<li>…</li>
</ul></li>
<li><a target="_blank" rel="noopener" href="http://unix.stackexchange.com/questions/96797/what-does-the-interruptible-sleep-state-indicate">http://unix.stackexchange.com/questions/96797/what-does-the-interruptible-sleep-state-indicate</a></li>
<li><a target="_blank" rel="noopener" href="http://stackoverflow.com/questions/767551/how-to-stop-uninterruptible-process-on-linux">http://stackoverflow.com/questions/767551/how-to-stop-uninterruptible-process-on-linux</a></li>
</ul>
<h2 id="process-lifecycle---return-back-to-ready">Process lifecycle - return back to ready</h2>
<p><img src="https://i.loli.net/2021/03/20/lxZ2SmhivuwteIk.png" /></p>
<h2 id="process-lifecycle---going-to-die">Process lifecycle - going to die</h2>
<p><img src="https://i.loli.net/2021/03/20/VBXdG42kHjFn9MC.png" /></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://yidaoxiangan.com/blog/2021/03/18/2021%E8%85%BE%E8%AE%AF%E5%90%8E%E5%8F%B0%E5%BC%80%E5%8F%91%E6%9A%91%E6%9C%9F%E5%AE%9E%E4%B9%A0%E9%9D%A2%E7%BB%8F-3%E6%9C%8818%E6%97%A5-%E4%BA%8C%E9%9D%A2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="异道相安">
      <meta itemprop="description" content="不觉茫茫道路长">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="异道相安的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/2021/03/18/2021%E8%85%BE%E8%AE%AF%E5%90%8E%E5%8F%B0%E5%BC%80%E5%8F%91%E6%9A%91%E6%9C%9F%E5%AE%9E%E4%B9%A0%E9%9D%A2%E7%BB%8F-3%E6%9C%8818%E6%97%A5-%E4%BA%8C%E9%9D%A2/" class="post-title-link" itemprop="url">2021-03-18-2021腾讯后台开发暑期实习面经-3月18日-二面</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-03-18 11:33:26" itemprop="dateCreated datePublished" datetime="2021-03-18T11:33:26+08:00">2021-03-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-07-17 00:19:29" itemprop="dateModified" datetime="2021-07-17T00:19:29+08:00">2021-07-17</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="x00-准备">0x00 准备</h2>
<p>今天一整天没课，为面试准备了一整天。前前后后做了几千字的笔记。</p>
<h2 id="x01-面试">0x01 面试</h2>
<p>晚上7点开始。先自我介绍。</p>
<p>面试官问：选出一个能介绍你自己的项目。</p>
<p>我选了游戏项目。</p>
<p>面试官：我们部门主要是做基础架构的，你要是想做游戏我可以帮你推给其他部门。</p>
<p>我：立刻改口。</p>
<p>面试官问其他项目，提到C/C++。</p>
<p>面试官要求设计一个接口。基于C/C++，输入两个int型的变量，输出它们的乘积。</p>
<p>面试官问网络相关项目。</p>
<p>面试官问：tcp和udp能同时用一个端口吗。</p>
<p>面试官问：什么时候能来上班。</p>
<p>面试官问：老家什么地方的。</p>
<p>面试官问：打算考研吗？</p>
<p>面试官问：将来有什么打算？</p>
<h2 id="x02-反问环节">0x02 反问环节</h2>
<p>我：主要业务是什么？</p>
<p>我：技术水平如何？</p>
<p>我：希望什么时候能入职？</p>
<p>我：听说腾讯工作比其他大厂轻松，真的吗？</p>
<p>我：如果过了，还有几轮面试？</p>
<p>我：有什么需要学习的地方？</p>
<p>我：面试中有哪些不足？</p>
<h2 id="x03-后记">0x03 后记</h2>
<p>满打满算只问了二十分钟，没怎么问技术问题。面试总时长三十分钟。</p>
<p>10分钟出结果，官网显示复试过了，到hr面。大概teg真缺人。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://yidaoxiangan.com/blog/2021/03/17/Hexo%E4%BD%BF%E7%94%A8Pandoc%E6%B8%B2%E6%9F%93%E5%B8%A6%E6%9D%A5%E7%9A%84%E5%88%97%E8%A1%A8%E7%BC%A9%E8%BF%9B%E9%97%AE%E9%A2%98%E5%8F%8A%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="异道相安">
      <meta itemprop="description" content="不觉茫茫道路长">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="异道相安的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/2021/03/17/Hexo%E4%BD%BF%E7%94%A8Pandoc%E6%B8%B2%E6%9F%93%E5%B8%A6%E6%9D%A5%E7%9A%84%E5%88%97%E8%A1%A8%E7%BC%A9%E8%BF%9B%E9%97%AE%E9%A2%98%E5%8F%8A%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/" class="post-title-link" itemprop="url">Hexo使用Pandoc渲染带来的列表缩进问题及解决方案</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-03-17 19:12:04" itemprop="dateCreated datePublished" datetime="2021-03-17T19:12:04+08:00">2021-03-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-07-17 00:19:29" itemprop="dateModified" datetime="2021-07-17T00:19:29+08:00">2021-07-17</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="x00-起因">0x00 起因</h2>
<p>为了让数学公式在博客上被成功的渲染，我找了半天的教程。最后按照这篇next主题这篇<a target="_blank" rel="noopener" href="https://theme-next.js.org/docs/third-party-services/math-equations">官方指导</a>来解决了公式渲染问题。</p>
<p>具体思路如下。</p>
<ol type="1">
<li>在 next/config.yml 文件中修改如下。</li>
</ol>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Math Formulas Render Support</span></span><br><span class="line"><span class="attr">math:</span></span><br><span class="line">  <span class="comment"># Default (false) will load mathjax / katex script on demand.</span></span><br><span class="line">  <span class="comment"># That is it only render those page which has `mathjax: true` in front-matter.</span></span><br><span class="line">  <span class="comment"># If you set it to true, it will load mathjax / katex srcipt EVERY PAGE.</span></span><br><span class="line">  <span class="attr">every_page:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">mathjax:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># Available values: none | ams | all</span></span><br><span class="line">    <span class="attr">tags:</span> <span class="string">none</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">katex:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">    <span class="comment"># See: https://github.com/KaTeX/KaTeX/tree/master/contrib/copy-tex</span></span><br><span class="line">    <span class="attr">copy_tex:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>
<ol start="2" type="1">
<li>删除原有的<code>hexo-renderer-marked</code>包，安装<code>hexo-renderer-pandoc</code>包。</li>
</ol>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ npm un hexo-renderer-marked</span><br><span class="line">- no output</span><br><span class="line">$ npm i hexo-renderer-pandoc</span><br><span class="line">- no output</span><br></pre></td></tr></table></figure>
<ol start="3" type="1">
<li>安装 <a target="_blank" rel="noopener" href="https://github.com/jgm/pandoc">pandoc</a>。</li>
</ol>
<h2 id="x01-问题">0x01 问题</h2>
<p>数学公式渲染得非常完美，但是markdown文档的无序列表出了问题。</p>
<p>起因在于我使用vscode编辑markdown文档，markdown使用两个空格来表示无序列表和子列表的缩进。</p>
<p>markdown格式并没有非常严格统一的标准，各家都有自己小小的不同。pandoc则默认使用4个空格来做列表和子列表的缩进。</p>
<h2 id="x02-解决">0x02 解决</h2>
<p>在网上查了一下，五年前就有人在<a target="_blank" rel="noopener" href="https://github.com/jgm/pandoc">pandoc项目</a>下提出了相关的<a target="_blank" rel="noopener" href="https://github.com/jgm/pandoc/issues/2210">issue</a>。程序员们为应该使用4个空格还是2个空格进行缩进吵得不亦乐乎。</p>
<p>issue串中有人提出了<a target="_blank" rel="noopener" href="https://github.com/jgm/pandoc/issues/2210#issuecomment-215547943">解决方案</a>。</p>
<blockquote>
<p>Sorry about the necro post.</p>
<p>Using --tab-stop 2 in the command line will allow you to use 2 spaces for nesting lists. Not sure of this is a deprecated or undocumented feature, works in 1.17.0.2-win.</p>
</blockquote>
<p>也就是说pandoc提供了 <code>--tab-stop 2</code> 这一标签来确定这类缩进的空格数。我们可以轻易的猜想到hexo使用了 <code>hexo-renderer-pandoc</code>这一npm包来调用pandoc以渲染markdown。</p>
<p>找到调用的js源代码并修改。</p>
<p>目录：<strong>myblog/node_modules/hexo-renderer-pandoc/index.js</strong></p>
<p>源代码为：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> args = [ <span class="string">&#x27;-f&#x27;</span>, <span class="string">&#x27;markdown-smart&#x27;</span>+extensions, <span class="string">&#x27;-t&#x27;</span>, <span class="string">&#x27;html-smart&#x27;</span>, math]</span><br></pre></td></tr></table></figure>
<p>修改为：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> args = [ <span class="string">&#x27;-f&#x27;</span>, <span class="string">&#x27;markdown&#x27;</span>+extensions, <span class="string">&#x27;-t&#x27;</span>, <span class="string">&#x27;html&#x27;</span>, math, <span class="string">&#x27;--tab-stop&#x27;</span>, <span class="string">&#x27;2&#x27;</span>]</span><br></pre></td></tr></table></figure>
<p>其中，去掉两个smart是解决<a target="_blank" rel="noopener" href="https://github.com/wzpan/hexo-renderer-pandoc/issues/36">另一个bug</a>。不在此赘述。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://yidaoxiangan.com/blog/2021/03/17/CS304-Software-Engineering-Week5-Note/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="异道相安">
      <meta itemprop="description" content="不觉茫茫道路长">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="异道相安的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/2021/03/17/CS304-Software-Engineering-Week5-Note/" class="post-title-link" itemprop="url">CS304 Software Engineering Week5 Note</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-03-17 17:05:52" itemprop="dateCreated datePublished" datetime="2021-03-17T17:05:52+08:00">2021-03-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-07-17 00:19:29" itemprop="dateModified" datetime="2021-07-17T00:19:29+08:00">2021-07-17</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="week5_note">week5_Note</h1>
<h2 id="project">Project</h2>
<p>Rules for submitting pull requests</p>
<h2 id="project-rules-what-not-to-do-when-making-pull-requestpr">Project Rules: What not to do when making pull request(PR)?</h2>
<ul>
<li>Need to change the code to resolve conflicts so that developers can merge cleanly</li>
<li>No communication with the user and developer. Only fixing the way you like.</li>
<li>Do not choose documentation related issue.</li>
<li>Do not adding too many commits to your PR. You PR should be short.</li>
<li>Make minimal changes to current code. A PR that change less lines will be more likely to be accepted!</li>
<li>Hit-and run PR: commits and run away without responding. This is very bad practice because:
<ul>
<li>Waste time of developer in code review</li>
<li>Developers need to correct you mistake because you didn;t even check if you are implementing the correct issue</li>
<li>Developer mention you several times but do not respond. Leave a bad reputation in GitHub.</li>
</ul></li>
</ul>
<h2 id="recap-failure-and-errors">Recap: Failure and errors</h2>
<ul>
<li>Why is the difference between failure and errors?
<ul>
<li>计算、观察或测量值或条件，与真实、规定或理论上正确的值或条件之间的差异（Discrepancy between a computed, observed or measured value or condition and the true, specified, or theoretically correct value or condition.），可译为“错误”。Error是能够导致系统出现Failure的系统内部状态。</li>
<li>Failure：当一个系统不能执行所要求的功能时，即为Failure，可译为“失效”。（Termination of the ability of an element or an item to perform a function as required.)</li>
</ul></li>
</ul>
<h2 id="test-driven-developmenttdd">Test Driven Development(TDD)</h2>
<p>One of the core practices in XP</p>
<h2 id="kent-becks-rules">Kent Beck's rules</h2>
<ul>
<li>Beck's concept of test-driven development centers on two basic rules.</li>
<li>Eliminate duplication.</li>
</ul>
<h2 id="ambiguity-in-informal">Ambiguity in Informal</h2>
<p>If the maintenance contract number provided by the customer is not valid?</p>
<ul>
<li>Contract number cannot contain alphabets or special characters</li>
<li>Contract number must be 5 digits</li>
<li>Contract number cannot start with 0?</li>
</ul>
<h2 id="steps-in-test-driven-development-tdd">Steps in Test Driven Development (TDD)</h2>
<ul>
<li>The iterative process
<ul>
<li>Quickly add a test.</li>
<li>Run all tests and see the new one fail.</li>
<li>Make a little change to code.</li>
<li>Run all tests and see them all succeed.</li>
<li>Refactor to remove duplication</li>
</ul></li>
</ul>
<h2 id="which-example-has-better-tests">Which example has better tests?</h2>
<ul>
<li>Each test should be independent of each other</li>
<li>Any given behaviour should be specified in one and only</li>
<li>Correct method signature should be assertEquals(expected,actual)</li>
<li>Use .equals() to compare strings</li>
</ul>
<h2 id="is-there-a-standard-measurement-for-test-quality">Is there a standard measurement for test quality</h2>
<p>Yes, code coverage!</p>
<h2 id="what-is-code-coverage">What is Code Coverage</h2>
<ul>
<li>Code coverage is a measure used to describe <strong>the degree to which the source code of a program is executed when a particular</strong> <em>test suite runs</em>(A form of dynamic analysis)</li>
<li>Code Coverage is classified as a <strong>White box testing</strong>
<ul>
<li>White Box testing: Testing where <strong>internal structure/ design/ implementation of the item</strong> being tested <strong>is known</strong></li>
</ul></li>
</ul>
<h2 id="benefits-of-code-coverage">Benefits of Code Coverage</h2>
<ul>
<li>Identify untested part of codebase</li>
<li>Improve the quality by imporved test coverage</li>
<li>Identify testing gaps or missing tests</li>
<li>Identify the redundant/dead code</li>
</ul>
<h2 id="coverage-criteria">Coverage Criteria</h2>
<p>To measure what percentage of code has been exercised by a test suite, one or more coverage</p>
<ul>
<li>Instructions Coverage
<ul>
<li>Method’s bytecode stream is a sequence of instructions for JVM</li>
<li>The Bytecode for a method are executed when that method is invoked.</li>
</ul></li>
<li>Statements Coverage
<ul>
<li>Reports whether each executable statement was executed</li>
</ul></li>
<li>Branch Coverage
<ul>
<li>Reports whether Boolean expressions evaluate to true</li>
</ul></li>
<li>Method Coverage
<ul>
<li>Reports whether a method (function) was invoked while testing the application</li>
</ul></li>
<li>Class Coverage
<ul>
<li>Report of number of classes from the code base covered.</li>
</ul></li>
</ul>
<h2 id="equation-for-computing-coverage">Equation for Computing Coverage</h2>
<p><span class="math display">\[\text{Statement Coverage} = \frac{\text{Number of executed statements}}{\text{Total number of statements}} \times 100\]</span></p>
<p><span class="math display">\[
\text{Branch Coverage} = \frac{\text{Number of Executed Branches}}{\text{Total number of Branches}} \times 100
\]</span></p>
<h2 id="code-coverage-analysis-process">Code Coverage Analysis Process</h2>
<ul>
<li>Writing test cases and execute them</li>
<li>Finding areas of code not covered using Code Coverage Tool</li>
<li>Creating additional tests for identified gaps to increase test coverage</li>
<li>Determining a quantitative measure of code coverage</li>
</ul>
<h2 id="code-coverage-using-jacoco">Code Coverage using JaCoCo</h2>
<ul>
<li>JaCoCo is an open source code coverage Tool for Java, which has been created by the EclEmma team
<ul>
<li>Configure JaCoCo agent with JVM of your system to instrument java classes</li>
<li>.EXEC file gets generated while the test cases are executed on the sys</li>
<li>Generate Code Coverage report using ant (in different format)</li>
</ul></li>
</ul>
<h2 id="mutation-testing">Mutation Testing</h2>
<h3 id="general-view">General View</h3>
<p>We are performing muttion analysis whenever we</p>
<ul>
<li>use well defined rules(mutation operators)</li>
<li>defined on syntactic description(grammars)</li>
<li>to make <strong>systematic changes</strong>(Applied universally or according to empirically verified distribution)</li>
<li>to the <strong>syntax</strong> or to <strong>objects</strong> developed from the syntax</li>
</ul>
<h2 id="why-mutation">Why Mutation?</h2>
<ul>
<li>Mutant processes are created to try to mimic typical syntactic errors made by program</li>
<li>Many differing <strong>mutants</strong> are run against the specified tests to assess the quality of the tests</li>
<li>The tests are attributed a score between 0 and 1, as to whether they can distinguish between the original and the mutants.</li>
</ul>
<h2 id="mutators">Mutators</h2>
<p>Mutators are patterns applied to source code to produce mutations</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://yidaoxiangan.com/blog/2021/03/13/CS302-Operating-System-Week4-Note/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="异道相安">
      <meta itemprop="description" content="不觉茫茫道路长">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="异道相安的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/2021/03/13/CS302-Operating-System-Week4-Note/" class="post-title-link" itemprop="url">CS302 Operating System Week4 Note</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-03-13 12:53:48" itemprop="dateCreated datePublished" datetime="2021-03-13T12:53:48+08:00">2021-03-13</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-07-17 00:19:29" itemprop="dateModified" datetime="2021-07-17T00:19:29+08:00">2021-07-17</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="lecture-3-process-i">Lecture 3: Process I</h1>
<h2 id="what-is-a-process">What is a process?</h2>
<ul>
<li>Process is a program in execution</li>
<li>It contains every accounting information of that running program e.g.
<ul>
<li>Current program counter</li>
<li>Accumulated running time</li>
<li>The list of files that are currently opened by that program</li>
<li>The page table</li>
</ul></li>
<li>Important concept: Process control block</li>
</ul>
<h2 id="what-is-a-process-1">What is a process</h2>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ ls | cat | cat</span><br><span class="line">[ctrl + C]</span><br><span class="line">$</span><br></pre></td></tr></table></figure>
<ul>
<li>The command involves <strong>three processes</strong></li>
<li>It will stop early if I send a <strong>signal</strong> to interrupt it</li>
<li>Its progress is determined by the <strong>scheduler</strong></li>
<li>The three processes <strong>cooperate</strong> to give useful output</li>
</ul>
<h3 id="what-are-those-two-cats">What are those two "cats"?</h3>
<ul>
<li>2 different processes using the same code "/bin/cat"</li>
</ul>
<h3 id="our-roadmap">Our Roadmap</h3>
<ol type="1">
<li>How to distinguish the two cats?</li>
<li>Who (and hwo to) create the processes?</li>
<li>Which should run first?</li>
<li>What are those pipes?</li>
<li>What if "ls" is feeding data too fast? ill the "cat" feels full and dies?</li>
</ol>
<h2 id="process-identification">Process identification</h2>
<ul>
<li>How can we identify processes from one to another?
<ul>
<li>Each process is given an unique ID number, and is called the processes ID, or the PID</li>
<li>The system call, getpid(), prints the PID of the calling process.</li>
</ul></li>
</ul>
<h2 id="process-creation">Process creation</h2>
<ul>
<li>To create a process, we use the system call fork().</li>
</ul>
<h2 id="process-creation---fork-system-call">Process creation - fork() system call</h2>
<ul>
<li>So, how do fork() and the processes behave?</li>
<li>What do we know?
<ul>
<li>Both the parent and the child execute the same program</li>
<li>The child process starts its execution at the location that fork() is returned, not from the beginning of the program</li>
</ul></li>
</ul>
<h3 id="let-there-be-only-one-cpu">Let there be only ONE CPU</h3>
<ul>
<li>Only one process is allowed to be executed at one time</li>
<li>However, we can't predict which process will be chosen by the OS</li>
<li>That is controlled by the OS's scheduler</li>
</ul>
<p>IMPORTANT: For child, the return value of fork() is zero</p>
<p>关于fork如何实现形式上返回两个值，详见<a target="_blank" rel="noopener" href="https://www.zhihu.com/question/24173190/answer/244790670">此文章</a></p>
<h3 id="fork-behaves-like-cell-division">fork() behaves like "cell division"</h3>
<ul>
<li>It creates the child process by cloning from the parent process, including all user-space data e.g.</li>
</ul>
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Cloned items</th>
<th style="text-align: left;">Descriptions</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Program counter[CPU register]</td>
<td style="text-align: left;">That's why they both execute from the same line of code after fork() returns</td>
</tr>
<tr class="even">
<td style="text-align: left;">Program code[file &amp; memory]</td>
<td style="text-align: left;">They are sharing the same piece of code.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Memory</td>
<td style="text-align: left;">Including local variables, global variables, and dynamically allocated memory</td>
</tr>
<tr class="even">
<td style="text-align: left;">Opened files[Kernel's internal]</td>
<td style="text-align: left;">If the parent has opened a file "A", then the child will also have file "A" opened automatically.</td>
</tr>
</tbody>
</table>
<ul>
<li>However
<ul>
<li>fork() does not clone the following</li>
<li>Note: PCB is in the kernel space</li>
</ul></li>
</ul>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Distinct items</th>
<th style="text-align: left;">Parent</th>
<th style="text-align: left;">Child</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Return value of fork()</td>
<td style="text-align: left;">PID of the child process</td>
<td style="text-align: left;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">PID</td>
<td style="text-align: left;">Unchanged</td>
<td style="text-align: left;">Different, not necessarily be "Parent PID + 1"</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Parent process</td>
<td style="text-align: left;">Unchanged</td>
<td style="text-align: left;">Parent</td>
</tr>
<tr class="even">
<td style="text-align: left;">Running time</td>
<td style="text-align: left;">Cumulated</td>
<td style="text-align: left;">Just created, so should be 0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">[Advanced] File locks</td>
<td style="text-align: left;">Unchanged</td>
<td style="text-align: left;">None</td>
</tr>
</tbody>
</table>
<h2 id="fork-can-only-duplicate">fork() can only duplicate</h2>
<ul>
<li>If a process can only duplicate itself and always runs the same program, it's not quite meaningful
<ul>
<li>how can we execute other programs?</li>
</ul></li>
<li>We want CHANGE!
<ul>
<li>Meet the exec*() system call family</li>
</ul></li>
</ul>
<h2 id="exec">exec</h2>
<ul>
<li>execl() - member of the exec system call family(and the family has 6 members)</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;before execl ...\n&quot;</span>);</span><br><span class="line">execl(<span class="string">&quot;/bin/ls&quot;</span>, <span class="string">&quot;/bin/ls&quot;</span>, <span class="literal">NULL</span>);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;after execl ...\n&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>Arguments of the execl() call</p>
<ul>
<li>1st argument: the program name, “/bin/ls” in the example.</li>
<li>2nd argument: argument[0] to the program.</li>
<li>3rd argument: argument[1] to the program.</li>
</ul>
<h2 id="exec-1">exec</h2>
<ul>
<li>The process is changing the code that is executing and never returns to the original code
<ul>
<li>The last two lines of codes are therefore not executed</li>
</ul></li>
<li>The process that call an exec* system call will <strong>replace</strong> user-space info e.g.,
<ul>
<li>Program Code</li>
<li>Memory: local variables, global variables, and dynamically allocated memory</li>
<li>Register value: e.g.m the program counter</li>
</ul></li>
<li>But, the kernel-space info of that process is preserved, including:
<ul>
<li>PID</li>
<li>Process relationship</li>
<li>etc.</li>
</ul></li>
</ul>
<h2 id="when-fork-meets-exec">When fork() meets exec*()</h2>
<ul>
<li>To implement the core part of a shell</li>
<li>To implement the C library call system()</li>
</ul>
<h2 id="fork-exec-system">fork() + exec*() = system()</h2>
<ul>
<li>It si very weird to allow different execution orders</li>
<li>How to let tht child to execute first?
<ul>
<li>But... we can't control the <strong>OS scheduler</strong></li>
</ul></li>
<li>Then, our problem becomes...
<ul>
<li>How to <strong>suspend</strong> the execution of the parent process?</li>
<li>How to wake the parent up after the child is terminated?</li>
</ul></li>
</ul>
<h3 id="fork-execl-wait-system">fork() + exec*(l + wait() = system()</h3>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">system_ver_CS302</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *cmd_str)</span> </span>&#123;</span><br><span class="line"> <span class="keyword">if</span>(cmd_str == <span class="number">-1</span>)</span><br><span class="line">  <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line"> <span class="keyword">if</span>(fork() == <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="built_in">execl</span>(<span class="string">&quot;/bin/sh&quot;</span>, <span class="string">&quot;/bin/sh&quot;</span>, <span class="string">&quot;-c&quot;</span>, cmd_str, <span class="literal">NULL</span>);</span><br><span class="line">    <span class="built_in">fprintf</span>(stderr, <span class="string">&quot;%s: command not found\n&quot;</span>, cmd_str);</span><br><span class="line">    <span class="built_in">exit</span>(<span class="number">-1</span>);</span><br><span class="line">  &#125;</span><br><span class="line"><span class="built_in">wait</span>(<span class="literal">NULL</span>);</span><br><span class="line"> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> <span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"> <span class="built_in">printf</span>(<span class="string">&quot;before...\n\n&quot;</span>);</span><br><span class="line"> <span class="built_in">system_ver_CS302</span>(<span class="string">&quot;/bin/ls&quot;</span>);</span><br><span class="line"> <span class="built_in">printf</span>(<span class="string">&quot;\nafter...\n&quot;</span>);</span><br><span class="line"> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<h3 id="process-life-cycleuser-space">Process Life Cycle(user-space)</h3>
<h3 id="wait---user-space">wait() - user-space</h3>
<p>wait() system call</p>
<ul>
<li>suspend the calling process to waiting state and return (wakes up) when
<ul>
<li>one of its child processes changes from
<ul>
<li>running to terminated</li>
</ul></li>
<li>Or a signal is received(will cover)</li>
</ul></li>
<li>return immediately(i.e., does nothing) fi
<ul>
<li>It has no children
<ul>
<li>Or a child terminates before the parent calls wait for</li>
</ul></li>
</ul></li>
</ul>
<h3 id="wait-vs-waitpid">wait() vs waitpid()</h3>
<p>wait()</p>
<ul>
<li>wait for any one of the children</li>
<li>Detect child termination</li>
</ul>
<p>waitpid()</p>
<ul>
<li>depending on the parameters, waitpid() will wait for a particular child only</li>
<li>Depending on the parameters, waitpid() multiple child's status change</li>
</ul>
<h2 id="summary">summary</h2>
<ul>
<li>A new process is created by <strong>fork()</strong>
<ul>
<li>Who is the first process</li>
</ul></li>
<li>A process is a program being brought by <strong>exec</strong> to the memory
<ul>
<li>has state(initial state = ready)</li>
<li>waiting for the OS to schedule the CPU to run it</li>
</ul></li>
<li>Can a process execute more than one program?
<ul>
<li>Yes, keeps on calling the <strong>exec</strong> system call family</li>
</ul></li>
<li>You now know how system() C library call is implemented by syscalls fork(), exec(), and wait()</li>
</ul>
<h2 id="exec-arguments-explained">exec*() – arguments explained</h2>
<ul>
<li>Environment variables</li>
<li>A set of strings maintained by the shell.</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv, <span class="keyword">char</span> **envp)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> i;</span><br><span class="line">  <span class="keyword">for</span>(i = <span class="number">0</span>; envp[i]; i++)</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, envp[i]);</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The “**envp” variable is an array of string</p>
<p>A string is an array of characters</p>
<ul>
<li>Environment variables
<ul>
<li>A set of strings maintained by the shell.</li>
<li>Quite a number of programs will read and make use of the environment variable.</li>
</ul></li>
</ul>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Variable name</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">SHELL</td>
<td style="text-align: left;">The path to the shell that you're using</td>
</tr>
<tr class="even">
<td style="text-align: left;">PWD</td>
<td style="text-align: left;">The full path to the directory that you’re currently on.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">HOME</td>
<td style="text-align: left;">The full path to your home directory</td>
</tr>
<tr class="even">
<td style="text-align: left;">USER</td>
<td style="text-align: left;">Your login name.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">EDITOR</td>
<td style="text-align: left;">Your default text editor.</td>
</tr>
<tr class="even">
<td style="text-align: left;">PRINTER</td>
<td style="text-align: left;">Your default printer</td>
</tr>
</tbody>
</table>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://yidaoxiangan.com/blog/2021/03/12/CS302-Operating-System-Week3-Note/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="异道相安">
      <meta itemprop="description" content="不觉茫茫道路长">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="异道相安的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/2021/03/12/CS302-Operating-System-Week3-Note/" class="post-title-link" itemprop="url">CS302 Operating System Week3 Note</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-03-12 18:16:40" itemprop="dateCreated datePublished" datetime="2021-03-12T18:16:40+08:00">2021-03-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-07-17 00:19:29" itemprop="dateModified" datetime="2021-07-17T00:19:29+08:00">2021-07-17</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="lecture-2-fundamental-os-concepts">Lecture 2 Fundamental OS Concepts</h1>
<h2 id="our-roadmap">Our roadmap</h2>
<ul>
<li>Computer organization revision</li>
<li>Kernel data structures in OS</li>
<li>OS history</li>
<li>Four fundamental OS concepts
<ul>
<li>Thread</li>
<li>Address space(with translation)</li>
<li>Process</li>
<li>Dual mode operation/ protection</li>
</ul></li>
</ul>
<h2 id="four-components-of-a-computer-system">Four Components of a computer system</h2>
<ul>
<li>Computer hardware</li>
<li>Operating system</li>
<li>system and application programs</li>
<li>user</li>
</ul>
<h2 id="computer-system-organization">Computer System Organization</h2>
<ul>
<li>Computer-system operation
<ul>
<li>One or more CPUs, device controllers connect through common bus providing access to shared memory</li>
<li>Concurrent execution of CPUs and devices competing for memory cycles</li>
</ul></li>
</ul>
<h2 id="kernel-data-structures">Kernel Data Structures</h2>
<ul>
<li>Many similar to standard programming data structures
<ul>
<li>Singly linked list</li>
<li>Doubly linked list</li>
<li>Circular linked list</li>
</ul></li>
<li>Binary search tree left &lt;= right
<ul>
<li>Search performance is O(n)</li>
<li>Balanced binary search tree is O(lgn)</li>
</ul></li>
<li>Hash function can create a hash map</li>
<li>Bitmap - string of n binary digits representing the status of n items</li>
<li>Linux data structures defined in include files &lt;linux/list.h&gt;,&lt;linux/kfifo.h&gt;,&lt;linux/rbtree.h&gt;</li>
</ul>
<h2 id="four-fundamental-os-concepts">Four Fundamental OS Concepts</h2>
<ul>
<li>Thread
<ul>
<li>Single unique execution context: fully describes program state</li>
<li>Program Counter, Register, Execution Flags, Stack</li>
</ul></li>
<li>Address space(with translation)
<ul>
<li>Programs execute in an <strong>address space</strong> that is distinct from the memory space of the physical machine</li>
</ul></li>
<li>Process
<ul>
<li>An instance of an executing program is "a progress consisting of an address and one or more threads of control"</li>
</ul></li>
<li>Dual mode operation / Protection
<ul>
<li>Only the "system" has the ability to access certain resources</li>
<li>The OS and the hardware are protected from user programs and user programs are isolated from one another by "controlling the translation" from program virtual addresses to machine physical addresses.</li>
</ul></li>
</ul>
<h2 id="os-bottom-line-run-programs">OS Bottom Line: Run Programs</h2>
<ul>
<li>Load instruction and data segments of executable file into memory</li>
<li>Create stack andd heap</li>
<li>Transfer control to program</li>
<li>Provide services to program</li>
<li>While protecting OS and program</li>
</ul>
<h2 id="first-os-concept-thread-of-control">First OS Concept: Thread of Control</h2>
<ul>
<li>Certain registers hold the <strong>context</strong> of thread
<ul>
<li>Stack pointer holds the address of the top of stack
<ul>
<li>Other conventions: Frame pointer, Heap pointer, Data</li>
</ul></li>
<li>May be defined by the instruction set architecture or by compiler conventions</li>
</ul></li>
<li>Thread; Single unique execution context
<ul>
<li>Program Counter, Register, Execution Flag, Stack</li>
</ul></li>
<li>A thread is executing on a processor when it is resident in the processor registers</li>
<li>PC register holds the address of executing instruction in the thread</li>
<li>Registers hold the root state fo the tread
<ul>
<li>The rest is "in memory"</li>
</ul></li>
</ul>
<h2 id="second-os-concept-programs-address-space">Second OS Concept: Program's address space</h2>
<ul>
<li>Address space: the set of accessible addresses + state associated with them</li>
<li>For a 32-bit processor there are 2^32 = 4 billion address</li>
<li>What happens when you read or write to an address?
<ul>
<li>Perhaps nothing</li>
<li>Perhaps acs like regular memory</li>
<li>Perhaps ignore writes</li>
<li>Perhaps causes I/O operation</li>
<li>Perhaps causes exception(fault)</li>
</ul></li>
</ul>
<h2 id="multiprogramming---multiple-threads-of-control">Multiprogramming - Multiple Threads of Control</h2>
<h2 id="how-can-we-give-the-illusion-of-multiple-processors">How can we give the illusion of multiple processors?</h2>
<ul>
<li>Assume a single processor: How do we provide the illusion of multiple processors?
<ul>
<li>Multiplex in time!</li>
</ul></li>
<li>Each virtual "CPU" needs a structure to hold:
<ul>
<li>Program Counter(PC), Stack Pointer(SP)</li>
<li>Registers(Integer, Floating point, others)</li>
</ul></li>
<li>How switch from one virtual CPU to the next
<ul>
<li>Save PC, SP, and registers in current state block</li>
<li>Load PC, SP, and registers from new state block</li>
</ul></li>
<li>what triggers switch?
<ul>
<li>Timer, voluntary yield, I/O, other things</li>
</ul></li>
</ul>
<h2 id="the-basic-problem-of-concurrency">The Basic Problem of Concurrency</h2>
<ul>
<li>The basic problem of concurrency involves resources:
<ul>
<li>Hardware: single CPU, single DRAM, single I/O devices</li>
<li>Multiprogramming API: processes think they have exclusive(独属的 ) access to shared resources</li>
</ul></li>
<li>OS has to coordinate all activities
<ul>
<li>Multiple processes, I/O interrupts, ...</li>
<li>How can it keep all these things straight?</li>
</ul></li>
<li>Basic Idea: Use Virtual Machine abstraction
<ul>
<li>Simple machine abstraction for processes</li>
<li>Multiplex these abstract machine</li>
</ul></li>
<li>Dra did this for "THE system"
<ul>
<li>Few thousand lines vs 1 million lines in OS 360(1K bugs)</li>
</ul></li>
</ul>
<h2 id="properties-of-this-simple-multiprogramming-technique">Properties of this simple multiprogramming technique</h2>
<ul>
<li>All virtual CPUs share same non-CPU resources
<ul>
<li>I/O devices the same</li>
<li>Memory the same</li>
</ul></li>
<li>Consequence of sharing:
<ul>
<li>Each thread can access the data of every other thread(good for sharing, bad for protection)</li>
<li>Threads can share instructions(good for sharing, bad for protection)</li>
<li>Can threads overwrite OS functions?</li>
</ul></li>
<li>This (unprotected) model is common in:
<ul>
<li>Embedded application</li>
<li>Windows 3.1 / Early Macintosh(switch only with yield)</li>
<li>windows 95 - ME(switch with both yield and timer)</li>
</ul></li>
</ul>
<h2 id="protection">Protection</h2>
<ul>
<li>Operating System must protect itself from user programs
<ul>
<li>Reliability: compromising the operating system generally causes it to crash</li>
<li>Security: limit the scope of what processes can do</li>
<li>Privacy: limit each process to the data it is permitted to access</li>
<li>Fairness: each should be limited to its appropriate share of system resources(CPU time, memory, I/O, etc)</li>
</ul></li>
<li>It must protect User programs from one another</li>
<li>Primary Mechanism: limit the translation from program address space to physical memory space
<ul>
<li>Can only touch what is mapped into process "address space"</li>
</ul></li>
<li>Additional Mechanisms:
<ul>
<li>Privileged instructions, in/out instructions, special register</li>
<li>syscall processing, subsystem implementation
<ul>
<li>e.g., file access rights, etc</li>
</ul></li>
</ul></li>
</ul>
<h2 id="third-os-concept-process">Third OS Concept: Process</h2>
<ul>
<li>Process: execution environment with Restricted Rights
<ul>
<li>Address Space with One or More Threads</li>
<li>Owns memory(address space)</li>
<li>Owns file descriptors, file system context, ...</li>
<li>Encapsulate one or more threads sharing process resources</li>
</ul></li>
<li>Why processes?
<ul>
<li>Protected from each other!</li>
<li>OS Protected from them</li>
<li>Processes provides memory protection</li>
<li>Threads more efficient than processes(later)</li>
</ul></li>
<li>Fundamental tradeoff between protection andd efficiency
<ul>
<li>Communication easier within a process</li>
<li>Communication harder between processes</li>
</ul></li>
<li>Application instance consists of one or more processes</li>
</ul>
<h2 id="single-and-multithreaded-processes">Single and Multithreaded Processes</h2>
<ul>
<li>Threads encapsulate concurrency:"Active" component</li>
<li>Address spaces encapsulate protection: "Passive" part
<ul>
<li>Keeps buggy program from trashing the system</li>
</ul></li>
<li>Why have multiple threads per address space?</li>
</ul>
<h2 id="fourth-os-concept-dual-mode-operation">FOurth OS Concept: Dual Mode Operation</h2>
<ul>
<li>Hardware provides at least two modes:
<ul>
<li>"Kernel" mode(or "supervisor" or "protected")</li>
<li>"User" mode: Normal programs executed</li>
</ul></li>
<li>What is needed in the hardware to support "dual mode" operation?
<ul>
<li>A bit of state (user/system mode bit)</li>
<li>Certain operations/ actions only permitted in system/kernel mode</li>
<li>Certain operations / actions only permitted in system/kernel mode
<ul>
<li>In user mode they fail or trap</li>
</ul></li>
</ul></li>
<li>User -&gt; Kernel transition sets system mode AND saves the user PC
<ul>
<li>Operating system code carefully puts aside user state then performs the necessary operations</li>
</ul></li>
<li>Kernel -&gt; User transition clears system mode AND restores appropriate user PC
<ul>
<li>return-from-interrupt</li>
</ul></li>
</ul>
<h2 id="unix-system-structure">Unix System Structure</h2>
<ul>
<li>User Mode
<ul>
<li>Applications</li>
<li>Standard Libs :
<ul>
<li>shells and commands</li>
<li>compilers and interpreters</li>
<li>system libraries</li>
</ul></li>
</ul></li>
<li>Kernel Mode
<ul>
<li>system-call interface to the kernel</li>
<li>signals terminal handling</li>
<li>character I/O system</li>
<li>terminal drivers</li>
<li>file system</li>
<li>swapping block I/O system</li>
<li>disk adn tape drivers</li>
<li>CPU scheduling</li>
<li>page replacement</li>
<li>demand paging</li>
<li>virtual memory</li>
<li>kernel interface to the hardware</li>
</ul></li>
<li>Hardware
<ul>
<li>terminal controllers</li>
<li>terminals</li>
<li>device controllers</li>
<li>disks and tapes</li>
<li>memory controllers</li>
<li>physical memory</li>
</ul></li>
</ul>
<h2 id="simple-protection-base-and-boundbb">Simple Protection: Base and bound(B&amp;B)</h2>
<ul>
<li>Requires relocating loader</li>
<li>Still protects OS and isolates program</li>
<li>No addition on address path</li>
</ul>
<h2 id="another-idea-address-space-translation">Another idea: Address Space Translation</h2>
<ul>
<li>Program operates in an address space that isn distinct from the physical memory space of the machine</li>
</ul>
<h2 id="a-simple-address-translation-with-base-and-bound">A simple address translation with Base and Bound</h2>
<ul>
<li>Can the program touch OS?</li>
<li>Can it touch other programs?</li>
</ul>
<h2 id="tying-it-together-simple-bb-os-loads-process">Tying it together: Simple B&amp;B: OS loads process</h2>
<h2 id="simple-bb-os-gets-ready-to-execute-process">Simple B&amp;B: OS gets ready to execute process</h2>
<ul>
<li>Privileged Inst: set special registers</li>
<li>RTU</li>
</ul>
<h2 id="simple-bb-user-code-running">Simple B&amp;B: User Code Running</h2>
<h2 id="types-of-mode-transfer">3 types of Mode Transfer</h2>
<ul>
<li>Syscall
<ul>
<li>Process requests a system service, e.g., exit</li>
<li>Like a function call, but "outside" the process</li>
<li>Does not have the address of the system function to call</li>
<li>Like a Remote Procedure Call(RPC) - for later</li>
<li>Marshall the syscall id and args in registers and exec syscall</li>
</ul></li>
<li>Interrupt
<ul>
<li>External asynchronous event triggers context switch</li>
<li>e.g., Timer, I/O device</li>
<li>Independent of user process</li>
</ul></li>
<li>Trap or Exception
<ul>
<li>Internal synchronous event in process triggers context switch</li>
<li>el.g., Protection violation(segmentation fault), Divide by zero,...</li>
</ul></li>
<li>All 3 are UNPROGRAMMED CONTROL TRANSFER
<ul>
<li>Where does it go?</li>
</ul></li>
</ul>
<h2 id="how-do-we-get-the-system-target-address-of-the-unprogrammed-control-transfer">How do we get the system target address of the "unprogrammed control transfer?"</h2>
<h2 id="interrupt-vector">Interrupt Vector</h2>
<ul>
<li>Address and properties of each interrupt handler</li>
</ul>
<h2 id="simple-bb-user-kernel">Simple B&amp;B: User =&gt; Kernel</h2>
<ul>
<li>How to return to system?j</li>
</ul>
<h2 id="simple-bb-interrupt">Simple B&amp;B: Interrupt</h2>
<ul>
<li>How to save registers and set up system stack?</li>
</ul>
<h2 id="simple-bb-switch-user-process">Simple B&amp;B: Switch User Process</h2>
<h2 id="simple-bb-resume">Simple B&amp;B: "resume"</h2>
<h2 id="dual-mode-operation">Dual Mode Operation</h2>
<h2 id="conclusion-four-fundamental-os-concepts">Conclusion: Four fundamental OS concepts</h2>
<ul>
<li>Thread</li>
<li>Address Space with Translation</li>
<li>Process</li>
<li>Dual Mode operation/Protection</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://yidaoxiangan.com/blog/2021/03/12/%E8%A5%BF%E6%96%B9%E5%93%B2%E5%AD%A6%E5%AF%BC%E8%AE%BA-Week4-Note/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="异道相安">
      <meta itemprop="description" content="不觉茫茫道路长">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="异道相安的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/2021/03/12/%E8%A5%BF%E6%96%B9%E5%93%B2%E5%AD%A6%E5%AF%BC%E8%AE%BA-Week4-Note/" class="post-title-link" itemprop="url">西方哲学导论 Week4 Note</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-03-12 16:37:08" itemprop="dateCreated datePublished" datetime="2021-03-12T16:37:08+08:00">2021-03-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-07-17 00:19:29" itemprop="dateModified" datetime="2021-07-17T00:19:29+08:00">2021-07-17</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="week4_note">Week4_note</h1>
<h2 id="高尔吉亚-gorgias-公元前480---前370">高尔吉亚 （Gorgias 公元前480 - 前370）</h2>
<ul>
<li>三个命题
<ul>
<li>无物存在</li>
<li>如果有物存在，人也无法认识</li>
<li>即使可以认识，也无法把它告诉别人</li>
</ul></li>
<li>解读：
<ul>
<li>第一，如果有物存在，怎么证明它真实存在？</li>
<li>第二，如果物可以认识，怎么证明对物的认识就是它本来的认识。</li>
<li>第三，如果可以将物的表达结果告诉别人，怎么证明语言表达的就是思想认识的内容？</li>
</ul></li>
</ul>
<h3 id="感觉与事物的真实状态是不一致的">感觉与事物的真实状态是不一致的</h3>
<p>感觉“不是按照真理”</p>
<h2 id="智者运动的历史地位">智者运动的历史地位</h2>
<p>全部智者学派运动的重大价值在于：激发了人们的思想，要求哲学，宗教，习俗，道德以及建立在他们之上的制度来辨明自己的合理性。智者否认认识的可能性，那就使有人有必要说明能够认识的代理。他们迫使哲学寻求认识的标准。他们评级传统道德，迫使道德反对怀疑主义和虚无主义来保护产出，找出是非的合理的原则。他们评级传统的宗教信仰，迫使思想家认为有必要找出更圆满和纯粹的神的观念。</p>
<h2 id="第二阶段苏格拉底哲学的形成">第二阶段，苏格拉底哲学的形成</h2>
<p>（苏格拉底， Socrates， 公元前469 - 前399年）</p>
<ul>
<li>述而不作</li>
<li>没有任何著作，其思想是通过”对话“报答，西方思想史上最伟大的哲学家之一。</li>
<li>长得很丑（？）</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://yidaoxiangan.com/blog/2021/03/11/2021%E8%85%BE%E8%AE%AF%E5%90%8E%E5%8F%B0%E5%BC%80%E5%8F%91%E6%9A%91%E6%9C%9F%E5%AE%9E%E4%B9%A0%E9%9D%A2%E7%BB%8F-3%E6%9C%8810%E6%97%A5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="异道相安">
      <meta itemprop="description" content="不觉茫茫道路长">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="异道相安的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/2021/03/11/2021%E8%85%BE%E8%AE%AF%E5%90%8E%E5%8F%B0%E5%BC%80%E5%8F%91%E6%9A%91%E6%9C%9F%E5%AE%9E%E4%B9%A0%E9%9D%A2%E7%BB%8F-3%E6%9C%8810%E6%97%A5/" class="post-title-link" itemprop="url">2021腾讯后台开发暑期实习面经 3月10日</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-03-11 18:27:08" itemprop="dateCreated datePublished" datetime="2021-03-11T18:27:08+08:00">2021-03-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-07-17 00:19:29" itemprop="dateModified" datetime="2021-07-17T00:19:29+08:00">2021-07-17</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="腾讯后台开发暑期实习面经-3月10日">2021腾讯后台开发暑期实习面经 3月10日</h1>
<p>8日投的简历，10日下午收到腾讯面试官的电话，预约当晚7点电话面试。非常高效。</p>
<h2 id="面试过程">面试过程</h2>
<p>晚7点面试官打来电话。先要求做自我介绍。</p>
<p>看到简历上C++相关项目，问是否用过STL库。答用过一些，提到了unordered_map。</p>
<p>面试官开始问unordered_map的底层细节。答不熟悉C++底层，学校使用Java入门。</p>
<h3 id="java">Java</h3>
<p>面试官转向Java，问Hashmap的底层实现和数据结构。</p>
<ul>
<li><p>问Hashmap的增删查改过程。</p></li>
<li><p>问Hashmap如何实现散列均匀。</p></li>
<li><p>问Hashmap为什么要用红黑树。</p></li>
<li><p>问Hashmap中数组过大怎么办。结合项目中稀疏矩阵提问。</p></li>
<li><p>问红黑树基本原理。</p></li>
<li><p>问AVL树原理。问AVL数如何保持平衡。问AVL数旋转过程。</p></li>
<li><p>问哈希函数原理，字符串哈希方法。</p></li>
<li><p>问Hashmap的哈希函数实现。</p></li>
<li><p>问Hashmap的扩容机制。</p></li>
<li><p>问需要存放大量数据是否适合使用Hashmap。</p></li>
<li><p>问使用Hashmap存放学校所有人信息，用姓名作为Key应该怎么存。有重名怎么办。</p></li>
</ul>
<h3 id="操作系统">操作系统</h3>
<p>问操作系统，答刚开始学，还没学完。遂没问操作系统的其他知识。</p>
<h3 id="网络">网络</h3>
<p>问计算机网络，先问是否了解http。</p>
<p>问TCP和UDP的区别。</p>
<p>问DNS请求过程。</p>
<p>问三次握手和四次挥手。</p>
<p>问在浏览器地址栏输入地址后敲下回车，发生了什么。</p>
<p>问不考虑机器运行时间，浏览器发起一个http请求后收到回应的第一个字符需要几个RTT。</p>
<p>问是否了解https。讲一下所知的。</p>
<h3 id="misc">MISC</h3>
<p>问十亿整数，如何查找前1000个大的数。(Top K 问题)</p>
<ul>
<li>问如何用字节流读取大文件。</li>
<li>问堆的数据结构实现。</li>
<li>问快速选择方法的具体思路。</li>
</ul>
<p>问十亿整数，如何查找中位数。</p>
<p>问十亿总数，如何统计出现频率最高的K个数字。</p>
<h3 id="手撕代码">手撕代码</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 将ip地址转换为点分16进制字符串</span></span><br><span class="line"><span class="comment">// e.g. 0 -&gt; 0.0.0.0</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">convert</span><span class="params">(<span class="keyword">int</span> ip)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// code here</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<h3 id="反问环节">反问环节</h3>
<p>问面试官是什么事业群的。答TEG。</p>
<p>问大概还有几轮面试，什么时候进行下一轮。答过了的话几天内会有人联系，大约还有两三轮。</p>
<p>问有何建设性意见。答没有特别的意见。</p>
<h3 id="没有问到的内容">没有问到的内容</h3>
<p>数据库</p>
<p>设计模式</p>
<p>简历项目</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://yidaoxiangan.com/blog/2021/03/08/CS304-Software-Engine-Week4-Note/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="异道相安">
      <meta itemprop="description" content="不觉茫茫道路长">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="异道相安的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/2021/03/08/CS304-Software-Engine-Week4-Note/" class="post-title-link" itemprop="url">CS304 Software Engineering Week4 Note</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-03-08 16:16:23" itemprop="dateCreated datePublished" datetime="2021-03-08T16:16:23+08:00">2021-03-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-07-17 00:19:29" itemprop="dateModified" datetime="2021-07-17T00:19:29+08:00">2021-07-17</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="week4_note">Week4_note</h1>
<h2 id="xp-is-an-iterative-process">XP is an Iterative Process</h2>
<ul>
<li>Iteration = two week cycle (1 - 3 weeks)</li>
<li><strong>Plan</strong> each iteration in an iteration meeting that is held at the start of the iteration</li>
<li>Iteration is going to implement set of <strong>user stories</strong></li>
<li>Divide work into tasks small enough to finish in a day</li>
<li>Each day, programmers work in pairs to finish task</li>
</ul>
<h2 id="what-are-user-stories">What are user stories</h2>
<ul>
<li>A user story represents
<ul>
<li>A <strong>feature customers</strong> want in the software</li>
</ul></li>
<li>A user story is the smallest amount of information (a step) necessary to allow the customer to define (and steer) a path through the system</li>
<li>Written by customers(through communication with developers), and not by developers</li>
<li>Typically written on index cards</li>
</ul>
<h2 id="writing-user-stories">Writing user stories</h2>
<ul>
<li>Material
<ul>
<li>A stack of blank index cards</li>
<li>Pens or pencils</li>
<li>Rubber bands</li>
</ul></li>
<li>Start with a goal of the system
<ul>
<li>e.g. "Applicant submits a loan application"</li>
<li>Think about the step that the user takes as he/she does the activity</li>
<li>Write no more than one step on each card</li>
</ul></li>
</ul>
<h2 id="format-of-a-user-story">Format of a user story</h2>
<ul>
<li>Title: 2-3 words</li>
<li>Acceptance test(unique identifier)</li>
<li>Priority 1-2-3(1 most important)</li>
<li>Story points(can mean #days of ideal development, i.e., no distractions or working on other things)</li>
</ul>
<h2 id="concepts">Concepts</h2>
<ul>
<li>Story point: unit of measure for expressing the overall size of a user story, feature, or other piece of work. The raw value of a story point is unimportant. What matters are the relative values.
<ul>
<li>Related to how hard it is and how much of it there is</li>
<li><strong>Not</strong> related to amount of time or the number of people</li>
<li>Unitless, but numerically-meaningful</li>
</ul></li>
<li>Ideal time: the amount of time "something" takes when stripped of all peripheral activities</li>
<li>Elapsed time: the amount of time that passes on the clock to do "something"</li>
<li>Velocity: measure of a team's rate of progress</li>
</ul>
<h2 id="priority">Priority</h2>
<ul>
<li>High</li>
<li>Medium</li>
<li>Low</li>
</ul>
<h2 id="estimating-story-points">Estimating story points</h2>
<ul>
<li>Choose a medium-size story and assign it a "5"</li>
<li>Estimate other stories relative to that
<ul>
<li>Twice as big</li>
<li>Half as big</li>
<li>Almost but not quite as big</li>
<li>A little bit bigger</li>
</ul></li>
<li>Only values:
<ul>
<li>0,1,2,3,5,8,13,20,40,100</li>
</ul></li>
</ul>
<h2 id="estimating-ideal-days">Estimating ideal days</h2>
<ul>
<li>Ideal days vs. elapsed time in software development
<ul>
<li>Supporting current release</li>
<li>sick time</li>
<li>meetings</li>
<li>demonstrations</li>
<li>personal issue</li>
<li>Phone call</li>
</ul></li>
<li>When estimating ideal days, assume:
<ul>
<li>The story being estimated is the only thing you'll work on</li>
<li>Everything you need will be on hand when you start</li>
<li>There will be no interruptions</li>
</ul></li>
</ul>
<h2 id="ideal-days-vs.-story-points">Ideal Days vs. Story Points</h2>
<ul>
<li>Favoring story points:
<ul>
<li>Help drive cross-functional behavior</li>
<li>Do not decay(change based on experience)</li>
<li>Are a pure measure of size(focus on feature, not person)</li>
<li>Estimation is typically faster in the long run</li>
<li>My ideal days are not your ideal days(focus on person and their speed)</li>
</ul></li>
<li>Favoring ideal days;
<ul>
<li>Easier to explain outside of team</li>
<li>Estimation is typically faster at first</li>
</ul></li>
</ul>
<h2 id="deriving-an-estimate-for-a-user-story">Deriving an estimate for a user story</h2>
<ul>
<li>Expert opinion
<ul>
<li>Rely on gut feel based on (extensive) experience</li>
<li>disadvantage for agile: need to consider all aspects of developing the user story, so one expert will likely not be enough</li>
</ul></li>
<li>Analogy
<ul>
<li>Relative to (several) other user stories</li>
<li>Triangulation: little bigger than that "3" and a little smaller than that"8"</li>
</ul></li>
<li>Disaggregation
<ul>
<li>Break up into smaller, easier-to-estimate pieces/tasks.</li>
<li>Need to make sure you don't miss any tasks</li>
<li>Sanity check: does the sum of all the parts make sense?</li>
<li>Planning poker
<ul>
<li>Combines expert opinion, analogy, disaggregation</li>
</ul></li>
</ul></li>
</ul>
<h2 id="velocity">Velocity</h2>
<ul>
<li>Velocity is a measure of a team's rate of progress</li>
<li>Velocity is calculated by summing the number of story points assigned to each user story that the tea completed during the operation</li>
<li>We assume that the team will produce in future iterations at the rate of their past average velocity
<ul>
<li>"Yesterdays weather"</li>
</ul></li>
</ul>
<h2 id="prioritization">Prioritization</h2>
<ul>
<li>Driven by customer, in conjunction with developer</li>
<li>Choose features to fill up velocity of iteration, based on:
<ul>
<li>Desirability of feature to a broad base of customers/users</li>
<li>Desirability f feature to a small number of important customers/users</li>
<li>The cohesiveness of the story in relation to other stories
<ul>
<li>Example:
<ul>
<li>"Zoom in" a high priority feature</li>
<li>"Zoom out" not a high priority feature
<ul>
<li>But it becomes one relative to "Zoom in"</li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul>
<h2 id="planning-game">Planning game</h2>
<ul>
<li>Customer writes user stories</li>
<li>Programmers estimate time to do each story</li>
<li>If story is too big, customer splits it</li>
<li>Customer chooses stories to match project velocity</li>
<li>Project velocity is amount of work done in the previous iteration(s)</li>
</ul>
<h2 id="planning">Planning</h2>
<ul>
<li>Programmers only worry about one iteration at a time</li>
<li>Customer can plan as many iterations as desired, but can change future iterations</li>
</ul>
<h2 id="simplicity">Simplicity</h2>
<ul>
<li>Add one feature(user story) at a time</li>
<li>Don't worry about future stories</li>
<li>Make program as simple as possible</li>
<li>The simplest thing that could possibly work</li>
</ul>
<h2 id="need-educated-customer">Need Educated customer</h2>
<h2 id="xp-works-best-when">XP works best when</h2>
<ul>
<li>Educated customer on site</li>
<li>Small team</li>
<li>People who like to talk</li>
<li>All in one room(including customer)
<ul>
<li>These days the room can also be virtual</li>
</ul></li>
<li>Changing requirements</li>
</ul>
<h2 id="unit-tests-and-refactoring">Unit tests and refactoring</h2>
<ul>
<li>Because code is as simple as it can be, adding a enw feature tends to make it less simple</li>
<li>To recover simplicity, you must refactor the code</li>
<li>To refactor safely, yous should have a rigorous set of unit test</li>
</ul>
<h2 id="working-software">Working software</h2>
<ul>
<li>All software has automated(unit) test</li>
<li>All test pass, all the time
<ul>
<li>Never check in broken code</li>
</ul></li>
<li>How to work on a task
<ul>
<li>Get latest version of the code. All tests pass</li>
<li>Write test first. If fails</li>
<li>Write code to make test pass. Now all tests pass</li>
<li>Refactor(clean up)</li>
<li>Check in your code</li>
</ul></li>
</ul>
<h2 id="one-key-practice">One key practice</h2>
<ul>
<li>Write tests first, then write code</li>
<li>various name
<ul>
<li>Test-first programming</li>
<li>Test-driven development</li>
</ul></li>
<li>Is it testing or designing?</li>
<li>Degree to which yous tick to if for MP?</li>
</ul>
<h2 id="why-test">Why test?</h2>
<ul>
<li>Improve quality - find bugs</li>
<li>Measure quality
<ul>
<li>Prove there are no bugs?</li>
<li>Determine if software is ready to be released</li>
<li>Determine what to work on</li>
<li>See if you made a mistake</li>
</ul></li>
<li>Learn the software</li>
<li>Grade MPs</li>
</ul>
<h2 id="what-is-a-test">What is a Test?</h2>
<ul>
<li>Run program with known input(test inputs/data), check results (with test oracles)
<ul>
<li>Test pass (green) or fail(red)</li>
</ul></li>
<li>Tests can document faults</li>
<li>Tests can document code</li>
<li>Important terminology to remember:
<ul>
<li>Mistake, fault(or defect, or bug), failure, error</li>
<li>Oracle</li>
</ul></li>
</ul>
<h2 id="terminology-mistake-faultbug-failure-error">Terminology: Mistake, Fault/Bug, Failure, Error</h2>
<ul>
<li>Programmer makes a mistake</li>
<li>Fault(defect, bug) appears in the program</li>
<li>Program failure occurs during execution(program behaves unexpectedly)</li>
<li>Error: difference between computed, observed, or measured value or condition and true, specified, or theoretically correct value or condition.</li>
</ul>
<h2 id="test-input-vs.-test-oracle">Test input vs. test oracle</h2>
<h2 id="advanced-topics-in-junit">Advanced topics in junit</h2>
<ul>
<li>Assertion patterns</li>
<li>Parameterized JUnit tests</li>
<li>Junit theories</li>
</ul>
<h2 id="test-driven-developmenttdd">Test Driven Development(TDD)</h2>
<ul>
<li>One of the practices in XP</li>
</ul>
<h2 id="kent-becks-rules">Kent Beck's rules</h2>
<ul>
<li>Becks concept of test-driven development centers on two basic rules:
<ul>
<li>Never write a single line of code unless you have a failing automated test</li>
<li>Eliminate duplication.</li>
</ul></li>
</ul>
<h3 id="informal-requirements">Informal Requirements</h3>
<p>If the maintenance contract number provided by the customer is not valid, the item follows the procedure for items not covered by warranty.</p>
<h2 id="steps-in-test-driven-developmenttdd">Steps in Test Driven Development(TDD)</h2>
<p>The iterative process</p>
<ul>
<li>Quickly add a test</li>
<li>Run all tests and see the new one fail.</li>
<li>Make a little change to code.</li>
<li>Run all tests and see them all succeed.</li>
<li>Refactor to remove duplication.</li>
</ul>
<h2 id="test-first-scenario">Test First Scenario</h2>
<ul>
<li>Write test for the newly
<ul>
<li>These test cases will serve as a specification for your implementation</li>
<li>These test cases should fail now because the corresponding methods are not implement</li>
<li>Write minimal code to make the test pas</li>
<li>Add more tests</li>
</ul></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://yidaoxiangan.com/blog/2021/03/05/%E8%A5%BF%E6%96%B9%E5%93%B2%E5%AD%A6%E5%AF%BC%E8%AE%BA-week3-note/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="异道相安">
      <meta itemprop="description" content="不觉茫茫道路长">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="异道相安的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/blog/2021/03/05/%E8%A5%BF%E6%96%B9%E5%93%B2%E5%AD%A6%E5%AF%BC%E8%AE%BA-week3-note/" class="post-title-link" itemprop="url">西方哲学导论 Week3 Note</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-03-05 12:01:22" itemprop="dateCreated datePublished" datetime="2021-03-05T12:01:22+08:00">2021-03-05</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-07-17 00:19:29" itemprop="dateModified" datetime="2021-07-17T00:19:29+08:00">2021-07-17</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="week3_note">week3_Note</h1>
<h3 id="前苏格拉底时代">前苏格拉底时代</h3>
<h4 id="anaximander">Anaximander</h4>
<ul>
<li>万物的本原是“无定”</li>
<li>万物的多样性，水的“湿性”不能解释一切</li>
<li>万物的本原应是没有任何确定规定性 - 混沌</li>
<li>不定形且与水有关的东西 为 无定</li>
</ul>
<h4 id="anaximenes-546-a.d.---545-a.d">Anaximenes 546 a.d. - 545 a.d</h4>
<ul>
<li>世界的本原是气（综合了水和“无定”的特征）</li>
<li>与东方本体论相似</li>
</ul>
<h4 id="heraclitus-赫拉克利特-504-a.d.---501-a.d">Heraclitus 赫拉克利特 504 a.d. - 501 a.d</h4>
<ul>
<li>性格高傲，出身望族， 把王位让给兄弟</li>
<li>“世界是客观的”</li>
<li>“世界的本原是火” - “世界秩序不是任何人或任何人锁创造的，它过去，现在，未来永远是永恒的活火，在一定分寸上燃烧，在一定分寸上熄灭”
<ul>
<li>唯物主义 - 客观存在</li>
<li>万事万物是变化的</li>
</ul></li>
<li>“万物皆变，无物常驻”
<ul>
<li>“一切都是通过斗争和必然性而产生的”</li>
<li>“太阳每天都是新的”</li>
<li>“人不能同时走进同一条河流”</li>
<li>“我们存在又不存在”</li>
</ul></li>
<li>简单，直观，朴素的表达</li>
</ul>
<h4 id="本原内在不变的统一原则是逻各斯">本原内在不变的统一原则是“逻各斯”</h4>
<p>原意为话语，指说出的道理，是火在燃烧中遵循的理性规则和原则。即“一定分寸”</p>
<h4 id="我们看见特殊我们只能说出普遍">我们看见特殊，我们只能说出普遍</h4>
<ul>
<li>我们使用名词描述 - 名词 在 逻辑学上 为 概念</li>
</ul>
<h4 id="毕达哥拉斯学派">毕达哥拉斯学派</h4>
<p><strong>毕达哥拉斯</strong> 建立了一个有伦理，宗教和政治目的的社团：大家庭式的集体生活。</p>
<p><strong>基本观点</strong>：数是万物的本原</p>
<ul>
<li>第一，数先于事物存在，是构成万物的基础
<ul>
<li>" 万物的本原是一，从一产生二，而是从属于一的补丁的质料，一则是原因。.....”</li>
</ul></li>
<li>第二，一切事物的性质都可以被归结为数的规定性
<ul>
<li>比例关系：（决定事物结构的和谐）</li>
<li>对立关系：（有限和无限，奇数和偶数）</li>
<li>类比关系：（4代表正义，8代表爱情.......）</li>
</ul></li>
</ul>
<h4 id="埃利亚学派">埃利亚学派</h4>
<p>创始人：Xenophanes</p>
<ul>
<li>世界的本原是绝对不动的“神”</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">异道相安</p>
  <div class="site-description" itemprop="description">不觉茫茫道路长</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">22</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">34</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  
  
  
  
</div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
          load: ['[tex]/mhchem'],
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
          packages: {'[+]': ['mhchem']},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  

</body>
</html>
